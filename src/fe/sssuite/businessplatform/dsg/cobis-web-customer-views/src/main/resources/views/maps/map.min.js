!function(){"use strict";var e=cobis.createModule("MapModule",["oc.lazyLoad",cobis.modules.FPM,"ui.bootstrap","designerModule","ngResource"]);e.config(function(e,t,o,a){app.controllerProvider=e,app.compileProvider=t,app.routeProvider=o,app.filterProvider=a}),e.controller("MapsController",["$scope","$http","$filter","$modal","$routeParams","designer","dsgnrCommons",function(n,t,e,o,a,l,s){n.vc=l.initCustomViewContainer("MapView"),n.closeModal=function(){n.vc.closeModal(n.result)},n.initData=function(){var e=new s.API(n.vc).navigation.getCustomDialogParameters().searchData,t=e.latitude,o=e.longitude,a=e.reference+","+e.city+","+e.country;if(0==t&&0==o){var l="https://maps.googleapis.com/maps/api/geocode/json?address="+a+"&key=AIzaSyBRdzwaUFdmAGF8ExiNkTG3upBjWqIyP0c";console.log("",n.vc),console.log("Criterios de busqueda",a),n.result={},n.showMap(l)}else n.result={},n.viewCoordinates(t,o)},n.viewCoordinates=function(e,t){var o,a={lat:n.result.latitude=e,lng:n.result.longitude=t};null!=o&&o.setMap(null);var l=new google.maps.Map(document.getElementById("map"),{zoom:16,center:a});o=new google.maps.Marker({position:a,map:l,title:"Punto encontrado!",draggable:!0}),google.maps.event.addListener(o,"dragend",function(e){n.result.latitude=e.latLng.lat(),n.result.longitude=e.latLng.lng(),console.log("LATITUD:"+n.result.latitude),console.log("LONGITUD:"+n.result.longitude)})},n.showMap=function(e){t.get(e,{headers:{"If-Modified-Since":void 0,"Access-Control-Request-Headers":void 0}}).then(function(e){if(console.log("respuesta:",e.data),"ZERO_RESULTS"==e.data.status)alert("posicion no encontrada");else if("OK"==e.data.status){var t,o={lat:e.data.results[0].geometry.location.lat,lng:e.data.results[0].geometry.location.lng};n.result.latitude=e.data.results[0].geometry.location.lat,n.result.longitude=e.data.results[0].geometry.location.lng,null!=t&&t.setMap(null);var a=new google.maps.Map(document.getElementById("map"),{zoom:16,center:o});t=new google.maps.Marker({position:o,map:a,title:"Punto encontrado!",draggable:!0}),google.maps.event.addListener(t,"dragend",function(e){n.result.latitude=e.latLng.lat(),n.result.longitude=e.latLng.lng(),console.log("LATITUD:"+n.result.latitude),console.log("LONGITUD:"+n.result.longitude)})}})}}])}();