(function(a,b){if(typeof define==="function"&&define.amd){define("designerCommons",[],function(){return(b(window.angular,window.kendo,window.kendo.jQuery,window.cobis,window))})}else{b(window.angular,window.kendo,window.kendo.jQuery,window.cobis,window)}}(this,function(g,f,d,b,e){var c=g.module("designerModule",[b.modules.CONTAINER]),i=600,h=b.logging.getLoggerManager("designerCommons.js");c.service("dsgnrUtils",function(){function F(ab,aa){var Y=false,ac=ab.attr("k-filter"),Z=ab.attr("k-min-length");if(ac&&Z&&aa){Y=true}return Y}function A(Z){var aa=Z.data("kendoExtComboBox")||Z.data("kendoExtDropDownList"),Y=false;if(g.isDefined(aa)&&aa.dataSource.data()&&aa.dataSource.data().length===0){Y=true}return Y}function o(Y){var Z=Y.attr("k-cascade-from");return((typeof Z!==typeof undefined)&&(Z!==false))}function l(Y,Z){if(g.isDefined(Y)&&Y.length>0&&g.isDefined(Z)){Y.forEach(function(aa){aa.parentId=Z})}}function O(ag,Z,ah){var al=false,aj={},ac={},ad=false,ae=o(ah),af=ah.data("kendoExtComboBox")||ah.data("kendoExtDropDownList"),ak=af.options.dataValueField,aa=af.options.dataTextField,ab=af._state==="filter"?true:false,Y=false,ai=-1;if(ah.attr("k-cache-on-client")&&ah.attr("k-cache-on-client")==="true"){if(g.isDefined(Z)){g.forEach(Z.filters,function(an,am){if(an.field===aa){ai=am;if(g.isDefined(an.ignoreCase)&&an.value!==""){ad=true}}});if(!ab&&ai!==-1){Z.filters.splice(ai,1);if(af.select()!==0){af.text("")}}}if(ad&&ab){al=true}}return al}function D(ad,ac){var aa=[],ab=null,Z=null,Y=ad.options.dataTextField;g.forEach(ac.filters,function(ae){if(g.isDefined(ae.ignoreCase)){ab=ae}});if(ab!==null){Z=ab.operator;g.forEach(ad.dataSource.dataToBeFilterInClient,function(af){if(g.isDefined(af[Y])){var ag=af[Y].toLowerCase(),ah=ab.value.toLowerCase(),ae=null;switch(Z){case"eq":if(ag===ah){aa.push(af)}break;case"neq":if(ag!==ah){aa.push(af)}break;case"startswith":if(ag.indexOf(ah)===0){aa.push(af)}break;case"contains":if(ag.indexOf(ah)>=0){aa.push(af)}break;case"endswith":ae=ag.match(ah+"$");if(ae&&ae[0]===ah){aa.push(af)}break;default:break}}})}return aa}function E(aa){var ac,ab,Z,ae=aa.nodeName.toLowerCase(),Y=!isNaN(d.attr(aa,"tabindex"));function ad(af){return d.expr.filters.visible(af)&&!d(af).parents().addBack().filter(function(){return d.css(this,"visibility")==="hidden"}).length}if("area"===ae){ac=aa.parentNode;ab=ac.name;if(!aa.href||!ab||ac.nodeName.toLowerCase()!=="map"){return false}Z=d("img[usemap=#"+ab+"]")[0];return !!Z&&ad(Z)}return(/input|select|textarea|button|object/.test(ae)?!aa.disabled:"a"===ae?aa.href||Y:Y)&&ad(aa)}function J(ab){var aa=null,Y=null,Z=null;if(E(ab)){return true}else{aa=d("#"+ab.id);if(aa.data("kendoNumericTextBox")){Y=aa.siblings("input:visible");if(Y.length>0&&E(Y[0])){return true}}else{if(aa.data("kendoExtComboBox")){Z=aa.data("kendoExtComboBox").input;if(Z.length>0&&E(Z[0])){return true}}else{if(aa.data("kendoExtDropDownList")){Y=aa.parent();if(Y.length>0&&E(Y[0])){return true}}}}}return false}function s(ac){var ae="#"+ac,ad=d(ae),Y=null,aa=null,Z=null,ab=null;if(ad){Y=ad[0];if(Y&&Y.hasAttribute("id")){if(E(Y)){Y.focus()}else{aa=d("#"+Y.id);if(aa.data("kendoNumericTextBox")){Z=aa.siblings("input:visible");if(Z.length>0&&E(Z[0])){Z.focus()}}else{if(aa.data("kendoExtComboBox")){ab=aa.data("kendoExtComboBox").input;if(ab.length>0&&E(ab[0])){ab.focus()}}else{if(aa.data("kendoExtDropDownList")){ab=aa.parent()[0];ab.focus()}}}}}}}function m(Y,ab,aa){var Z=null,ac=null,ad=null;if(g.isDefined(Y.data)){if(Y.data("kendoTabStrip")){Z=d(ab).closest(".k-content").index();if(Z>0){Z=Z-1}Y.data("kendoTabStrip").select(Z)}else{if(Y.data("kendoPanelBar")){ac=Y.data("kendoPanelBar");ad=d(ab).closest(".k-panelbar > .k-item");if(ad.length>0){if(ad.hasClass("k-state-disabled")){ad.removeClass("k-state-disabled")}Y.find("> .k-item > .k-content").hide();ac.expand(ad,false)}}else{if(Y[0].className.indexOf("tab-pane")>-1){w(Y[0].id,ab,aa)}}}}}function w(ad,ac,aa){var Y,Z,af,ae,ab,ag;Y=d("#"+ad+"_tab");Z=Y.find("a");if(Z.length>0&&K(aa)===true){af=g.element(d("#"+ad)).scope();ae=Z.attr("ng-click");ab=ae.split("'");if(g.isDefined(af)){af.vc.clickTab(null,ab[1],ab[3]);Y.closest(".nav-pills").find("li.active").last().removeClass("active");Y.addClass("active");if(g.isUndefined(ac.nodeName)&&ac.nodeName!=="INPUT"){ac=aa}ag=J(ac);if(!ag){t(ad,ac,aa)}else{ac.focus()}}}}function t(ab,aa,Z){var ac="#"+ab;var Y=U(ac,aa);if(g.isDefined(Y)){m(Y,aa,Z)}}function U(aa,Z){var Y;if(aa!=null){Y=d(aa).closest(".k-tabstrip, .k-panelbar")}else{Y=d(Z).closest(".k-tabstrip, .k-panelbar")}if(Y.length>0){return Y}}function I(Z,Y){var aa=Z;if(Y&&Y.length>0){aa=Y.parent()}Y=d(aa).closest(".k-tabstrip, .k-panelbar, .tab-pane");if(Y.length>0){m(Y,aa,Z);if(!J(Z)){I(Z,Y)}}}function W(Y,Z){if(Z!==null){return((!Y||!g.isDefined(Y))&&d("#"+Z).hasClass("k-state-disabled"))}else{return !Y}}function y(Y){return d("#"+Y).hasClass("k-state-disabled")}function k(Z){var aa=Z.element.find(".k-invalid"),Y=null;if(aa){Y=x(Z);if(Y===null){return false}else{Y.focus();return true}}return false}function x(aa){var ae=aa.element.find(".k-invalid"),Z=0,ad=null,ac=null,Y=null,ab=null;if(ae){for(Z=0;Z<ae.length;Z=Z+1){ad=ae[Z];if(ad.tagName.toLowerCase()!=="div"&&ad.tagName.toLowerCase()!=="span"){I(ad);if(E(ad)||K(ad)===true){if(!E(ad)){setTimeout(function(){s(ad.id)})}return ad}else{ac=d("#"+ad.id);if(ac.data("kendoNumericTextBox")){Y=ac.siblings("input:visible");if(Y.length>0&&E(Y[0])){return Y}}else{if(ac.data("kendoExtComboBox")){ab=ac.data("kendoExtComboBox").input;if(ab.length>0&&E(ab[0])){return ab}}else{if(ac.data("kendoExtDropDownList")){Y=ac.parent();if(Y.length>0&&E(Y[0])){return true}}}}}}}}return null}function K(Z){var Y=j(Z);return !(Z.disabled===true||Y===false)}function j(Y){return !Y.classList.contains("ng-hide")}function z(Y,Z){if(Z===true){Y.removeAttr("disabled");Y.removeAttr("aria-disabled")}else{Y.attr("disabled","disabled");Y.attr("aria-disabled",true)}}function Q(Z,ab){var aa=d("li.k-item[id='"+Z+"'], li.k-item[id='"+Z+"_tab']"),Y=null;if(aa.length===1){z(aa,ab);Y=d(aa).closest(".k-panelbar, .k-tabstrip");if(ab===true){if(aa.hasClass("k-state-disabled")){aa.removeClass("k-state-disabled")}}else{if(ab===false){if(aa.attr("aria-expanded")){Y.data("kendoPanelBar").select(aa);Y.data("kendoPanelBar").collapse(aa)}if(!aa.hasClass("k-state-disabled")){aa.addClass("k-state-disabled")}}}}}function T(Y){var Z=[];d("#"+Y).find("input, select, textarea, button, div.form-control, div.k-grid").each(function(){var ab=d(this)[0].id,aa=ab.indexOf("-");if(aa>0){ab=ab.substring(0,aa)}Z.push(ab)});return Z.filter(function(aa){return aa!==""})}function P(Y){var Z=[];d("#"+Y).find("li.k-item").each(function(){var aa=d(this)[0].id;Z.push(aa)});return Z}function S(Z){var ab,ah,af,Y=f.support.browser.msie,ag=f.support.browser.version,aa=null,ac=null,ad=null,ae=this;switch(Z.propertyType){case"disabled":aa="enabled";ac=Z.property==="disabled";break;case"visible":aa="visible";ac=Z.property==="show";break;default:break}if(Z.property==="disabled"||Z.property==="hide"){Z.vc.viewState[Z.id][Z.propertyType]=ac;Z.vc.viewState[Z.id].disabledingroup=false;this.component.forceAttributeSetting(Z.id,aa,false);if(M(Z.id)){ab=this.container.getElementsIdsInsideAContainer(Z.id);g.forEach(ab,function(ak){if(ak&&ak!==""&&Z.vc.viewState[ak]){var aj=d("#"+ak);Z.vc.viewState[ak].disabledingroup=true;if((aj.data("kendoExtComboBox")||aj.attr("kendo-ext-combo-box")||aj.data("kendoExtDropDownList")||aj.attr("kendo-ext-drop-down-list"))&&g.isDefined(aj.attr("k-cascade-from"))){if(Y&&ag>10){setTimeout(function(){ae.component.forceAttributeSetting(ak,aa,false)},i)}else{ae.component.forceAttributeSetting(ak,aa,false)}}}});af=this.container.getGroupsIdsInsideAContainer(Z.id);g.forEach(af,function(aj){if(aj.indexOf("_VAL")>-1){aj=aj.slice(0,(aj.length-(aj.length-aj.indexOf("_VAL"))))}if(g.isDefined(Z.vc.viewState[aj])){Z.vc.viewState[aj][Z.propertyType]=ac}});ah=this.container.getContainersIdsInsideAContainer(Z.id);g.forEach(ah,function(aj){if(aj&&aj!==""&&Z.vc.viewState[aj]){Z.vc.viewState[aj].disabledingroup=true;ae.component.forceAttributeSetting(aj,aa,Z.vc.viewState[aj].disabledingroup||Z.vc.viewState[aj][Z.propertyType])}});if(Z.blockParent===undefined||!Z.blockParent&&aa==="enabled"){Z.vc.viewState[Z.id][Z.propertyType]=false;this.component.forceAttributeSetting(Z.id,aa,true)}}else{if(Z.id.indexOf("VA_")>-1){V(Z.id)}}}else{Z.vc.viewState[Z.id][Z.propertyType]=ac;Z.vc.viewState[Z.id].disabledingroup=false;this.component.forceAttributeSetting(Z.id,Z.propertyType,true);if(M(Z.id)){ab=this.container.getElementsIdsInsideAContainer(Z.id);g.forEach(ab,function(aj){if(aj&&aj!==""&&Z.vc.viewState[aj]){Z.vc.viewState[aj].disabledingroup=false}});af=this.container.getGroupsIdsInsideAContainer(Z.id);g.forEach(af,function(aj){if(aj.indexOf("_VAL")>-1){aj=aj.slice(0,(aj.length-(aj.length-aj.indexOf("_VAL"))))}if(g.isDefined(Z.vc.viewState[aj])){Z.vc.viewState[aj][Z.propertyType]=ac}});ah=this.container.getContainersIdsInsideAContainer(Z.id);g.forEach(ah,function(aj){if(aj&&aj!==""&&Z.vc.viewState[aj]){Z.vc.viewState[aj].disabledingroup=false;ae.component.forceAttributeSetting(aj,Z.propertyType,!(Z.vc.viewState[aj].disabledingroup||Z.vc.viewState[aj].disabled))}});if(d("#"+Z.id).closest(".cb-group-collapsible").length===0){var ai=d("#"+Z.id);ad=ai.closest(".k-tabstrip, .k-panelbar").attr("id");if(g.isDefined(ad)&&ad!==null){B(ab)}else{if(ai.closest(".cb-group, .cb-group-tabbed-h").length>0){ab=this.container.getElementsIdsInsideAContainer(af[af.length-1]);B(ab)}}}}}}function M(aa){var Z=aa.substring(0,2),Y=false;if(Z==="VC"||Z==="GR"||Z==="G_"){Y=true}return Y}function B(Z){var Y=Z.filter(function(aa){return aa!==""});I(d("#"+Y[0])[0]);setTimeout(function(){s(Y.filter(function(aa){return K(d("#"+aa)[0])})[0])})}function V(aa){if(aa!==""&&aa!==null&&aa!==undefined){var Y=d("#"+aa).siblings();if(Y.length>0){for(var Z=0;Z<Y.length;Z++){if(q(Y[Z])){d(Y[Z]).find("span").remove()}}}}}function q(Z){var Y=true;if(Z.attributes["class"].value==="k-dropdown-wrap k-state-default"||Z.attributes["class"].value==="input-group-btn"||Z.attributes["class"].value!=="k-widget k-tooltip k-tooltip-validation k-invalid-msg"){Y=false}return Y}function u(Y){var Z=[];d("#"+Y).find('div[id^="G_"],div[id^="GR_"]').each(function(){var aa=d(this)[0].id;Z.push(aa)});return Z}function G(ag,Z,ab){var aa=f.support.browser.msie,af=f.support.browser.version,ai=d("#"+ag),aj=null,ad=false,ac=false,ah=false,Y=false,ae=null;if(ai.length>0){if(ag.indexOf("VA_")!==-1){if(ai.data("kendoExtComboBox")||ai.attr("kendo-ext-combo-box")){aj=ai.data("kendoExtComboBox");ah=true;ad=true}else{if(ai.data("kendoNumericTextBox")||ai.attr("kendo-numeric-text-box")){aj=ai.data("kendoNumericTextBox");ah=true}else{if(ai.data("kendoDatePicker")||ai.attr("kendo-date-picker")){aj=ai.data("kendoDatePicker");ac=true;ah=true}else{if(ai.data("kendoMaskedTextBox")||ai.attr("kendo-masked-text-box")){aj=ai.data("kendoMaskedTextBox");ah=true}else{if(ai.data("kendoExtDropDownList")||ai.attr("kendo-ext-drop-down-list")){aj=ai.data("kendoExtDropDownList");ah=true}}}}}}else{if(ag.indexOf("GR_")!==-1){Y=true}}if(ah){switch(Z){case"enabled":if(ac===true){z(ai,ab)}else{if(aa&&af>10){ae=ai.attr("k-cascade-from");if(g.isDefined(ae)){setTimeout(function(){z(ai,ab,ad)},i)}else{z(ai,ab,ad)}}}break;case"readonly":aj.readonly(ab);break;case"visible":if(ai.data("kendoNumericTextBox")){if(ab===true){aj.wrapper.find("*").removeClass("ng-hide")}}break;default:break}}else{if(Y){switch(Z){case"enabled":Q(ag,ab);break;default:break}}}}}function v(ab,Z,Y,aa){var ac="";Z=g.isDefined(aa)?aa:Z;if(g.isDefined(Z)){g.forEach(Z,function(ad){ac=ac+ad+" "})}if(g.isDefined(Y)){g.forEach(Y,function(ae,ad){if(ae===true){ac=ac+ad+" "}})}return ac}function X(au,Z){if(typeof(au)!=="undefined"&&(au.keyCode===13)){var ag="",ac=au.target.id,Y=d("#"+ac),aq=false,av=au.target.getAttribute("aria-owns"),ap=Y.parents(".cb-queryview"),ah=false,af,ad,ae,ai,am,ak,ar,at,al,aa,ab,aj,an,aw,ao;if(ap.length===0){if(av!==null){af=av.substring(0,25);Y=d("#"+af)}ad=Y.parents("[cb-validator='cb-validation-independent']");ae=Y.parents(".cb-group").first();ai=ae.find("button[type='submit']").attr("id");if(ad.length!==0){ag=ad.find("button[type='submit']").attr("id");if(typeof(ag)==="undefined"){h.warn("Info: El grupo tiene validacion independiente pero no tiene boton tipo submit en el mismo grupo. Enter-Submit Not Found.")}}else{if(typeof(ai)!=="undefined"){ag=ai}else{ah=true}}}if(typeof(ag)!=="undefined"&&ah===false){Z.clickOnEnter(ag);aq=true}else{if(ah===true){am=Y.parents().find(".container");ak=am.length;cbis:for(ar=0;ar<ak;ar=ar+1){al=am.children().eq(ar);aa=al.find(".cb-fields");ab=aa.length;for(at=0;at<ab;at=at+1){aj=aa.children().eq(at);an=aj.parents("[cb-validator='cb-validation-independent']");if(typeof(an)==="undefined"||an.length===0){ag=aj.find("button[type='submit']").attr("id");if(typeof(ag)!=="undefined"){Z.clickOnEnter(ag);aq=true;break cbis}}}}}}if(aq===false&&ah===true){aw=Y.parents().find(".cb-control-bar-placeholder").find("button[type='submit']").attr("id");ao=Y.parents().find(".cb-navbar-placeholder").find("button[type='submit']").attr("id");if(typeof(aw)!=="undefined"){Z.clickOnEnter(aw)}else{if(typeof(ao)!=="undefined"){Z.clickOnEnter(ao)}}}}}function R(aa){var Y=null,ab,Z=null,ac=null;ab=d("#"+aa);if(ab){if(ab.hasClass("cb-group-tabbed-h")){Z=d("#"+aa+" > .k-tabstrip-wrapper > .k-tabstrip");ac="kendoTabStrip"}else{if(ab.hasClass("cb-group-collapsible")){Z=d("#"+aa+" > .k-tabstrip-wrapper > .k-tabstrip");ac="kendoPanelBar"}else{if(ab.hasClass("cb-group-accordion")){Z=d("#"+aa+" > .k-tabstrip-wrapper > .k-tabstrip");ac="kendoPanelBar"}}}if(ac==="kendoTabStrip"){Y=Z.data(ac)}else{if(ac==="kendoPanelBar"){Y=Z.data(ac)}}}return Y}function L(Y){var Z=-1;if(Y.data("kendoTabStrip")){Z=Y.data("kendoTabStrip").select().index()}return Z}function C(Y,Z){if(Y.data("kendoTabStrip")){Y.data("kendoTabStrip").select(Z)}}function n(Z){var Y=d(Z).closest(".k-tabstrip");if(Y.length>0){return Y}else{return null}}function r(){var aa=e.param,Y=null,Z=null;if(g.isDefined(aa)){Y=aa.dsgnr_vrsn;if(g.isDefined(Y)){Z=Number(Y.substring(6,10))}}return Z}function p(){var Z=r(),Y=false;if(Z!==null&&Z>=1520){Y=true}return Y}function N(Y,ac){var Z=Y,ab,aa;if(ac!==false&&sessionStorage&&sessionStorage.getItem("debuggingMode")!=="true"){Z=Y.replace(".js",".min.js")}ab=Z.length;if(ab>0){aa=Z.charAt(0);if(aa=="/"||aa=="\\"){Z=Z.substr(1)}}return Z}function H(){var Y=".min";if(sessionStorage&&sessionStorage.getItem("debuggingMode")==="true"){Y=""}return Y}return{combobox:{isAutocompleteComboBox:F,isClientFilteringRequest:O,isCascade:o,filterDataInClient:D,setParentId:l},component:{forceAttributeSetting:G,focusError:k,getElementFocusError:x,focusControl:s,getCssClass:v,forceEnabledAttributeForComponent:z},container:{getElementsIdsInsideAContainer:T,getContainersIdsInsideAContainer:P,getGroupsIdsInsideAContainer:u,validateOnEnter:X,activeContainer:W,isDisabledContainer:y,getKendoContainer:R,getSelectedIndexTab:L,selectTab:C,getContainerTab:n},task:{getDesignerFrameworkVersion:r,isNewDesignerFrameworkVersion:p},minification:{getCustomFilePath:N,getMinificationExt:H},setPropertyComponent:S}});c.service("dsgnrCommons",["cobisMessage","dsgnrUtils","$resource","$route","$rootScope","$modal","$filter","$injector","$ocLazyLoad","$http","$timeout","$q","$parse",function(F,l,r,v,s,t,w,z,j,I,G,E,n){if(z.has("dsgnrExt")){var J=z.get("dsgnrExt")}if(z.has("keepAliveUtils")){var p=z.get("keepAliveUtils")}var D={mode:{None:0,Insert:1,Update:2,Delete:4,Query:8,All:4095},event:{InitData:"initData",ChangeInitData:"changeInitData",LoadCatalog:"loadCatalog",LoadCatalogCobis:"loadCatalogCobis",ExecuteQuery:"executeQuery",ExecuteCommand:"executeCommand",ExecuteLabelCommand:"executeLabelCommand",ExecuteGridRowCommand:"gridRowCommand",ExecuteGridCommand:"gridCommand",GridRowUpdating:"gridRowUpdating",GridRowInserting:"gridRowInserting",GridRowDeleting:"gridRowDeleting",GridRowSelecting:"gridRowSelecting",GridRowRendering:"GridRowRendering",ShowGridRowDetailIcon:"showGridRowDetailIcon",ValidateTransaction:"validateTransaction",GridBeforeEnterInLineRow:"gridBeforeEnterInLineRow",GridAfterLeaveInLineRow:"gridAfterLeaveInLineRow",Change:"change",TabClosing:"tabClosing",OnCloseModalEvent:"onCloseModalEvent"},gridInlineWorkMode:{Insert:0,Update:1,Delete:2},dialogCloseResult:{Cancel:1,Accept:2},dialogCloseType:{Interactive:0,NonInteractive:1},styles:{Success:0,Fail:1,None:2},labelTypes:{LABEL:"LBL",MESSAGE:"MSG",SYSTEM:"SYS"},typeNavigation:{NORMAL:"normal",INPORTLET:"inPortlet",OUTPORTLET:"outPortlet"}},C;if(z.has("$designerPopover")){C=z.get("$designerPopover")}function q(){var M=[],K="0123456789abcdef",L;for(L=0;L<36;L=L+1){M[L]=K.substr(Math.floor(Math.random()*16),1)}M[14]="4";M[19]=K.substr((M[19]&3)|8,1);M[8]=M[13]=M[18]=M[23]="-";return M.join("")}function k(L,K){if(K===1){if(g.isDefined(L)&&L!==null){b.showMessageWindow.loading(true);setTimeout(function(){b.showMessageWindow.loading(false)},L)}else{b.showMessageWindow.loading(true);h.warn("blockScreen: No se especifico tiempo para desbloquear la pantalla. Debe usar unlock screen en la pantalla a la que navego")}}else{b.showMessageWindow.loading(false)}}function o(L,M,K){return r(L,{},{post:{method:"POST",transformRequest:M,transformResponse:K,params:{exceptionHandling:false,returnOnlyData:false}}})}function m(L,N){if(N){var M=[function(O){return JSON.stringify(O,function(Q,S){if(this[Q] instanceof Date){var R=b.userContext.getValue(b.constant.TIME_ZONE_RAW_OFFSET);R=g.isUndefined(R)||R===null?true:false;console.log("[Request] DateAsString: ",R);if(R){return this[Q].getSerializedDate()}else{var T=new Date();var P=this[Q].getTime()-(b.userContext.getValue(b.constant.TIME_ZONE_RAW_OFFSET))-T.getTimezoneOffset()*60000;return"/Date("+P+")/"}}return S})},function(O){if(!s.count){s.count=0}s.count=s.count+1;b.showMessageWindow.loading(true);return O}],K=function(P){var O={};try{O=JSON.parse(P,function(R,T){if(T&&T!==null&&typeof(T)==="string"&&T.indexOf("/Date(")==0&&T.charAt(T.length-1)=="/"&&T.charAt(T.length-2)==")"){var S=b.userContext.getValue(b.constant.TIME_ZONE_RAW_OFFSET);S=g.isUndefined(S)||S===null?true:false;console.log("[Response] DateAsString: ",S);if(S){return new Date().fromSerializedDate(T)}else{var U=parseInt(T.substring(6,T.length-2),10);var V=new Date();return new Date(U+(b.userContext.getValue(b.constant.TIME_ZONE_RAW_OFFSET))+V.getTimezoneOffset()*60000)}}return T})}catch(Q){}return O};return o(L,M,K)}return o(L)}function H(K){if(g.isDefined(K.status)){if(K.data.messages[0].code!==80103){F.showMessagesError(K.status+" - "+K.statusText);h.error("Error: "+K)}}else{if(K.messages!=="Internal Server Error"&&K.messages!=="Unauthorized"){F.showMessagesError(K.messages)}h.error("Error: "+K)}}function x(Q){var L={},R,M,O,K,P,S,N;if(Q!==null){R=Q.split(";");for(M=0;M<R.length;M=M+1){O=R[M];K=[];P=O.split("=");S=[];if(P.length==1){S=P[0].split("|");L["0"]=K}else{S=P[1].split("|");L[P[0]]=K}for(N=0;N<S.length;N=N+1){K.push(S[N])}}}return L}function u(M){var L="",Q,N,P,O,K;for(Q in M){if(Object.keys(M).length>1){L+=Q+"="}N=M[Q];P=0;O=N.length;for(K=0;K<N.length;K=K+1){L+=N[K];P=P+1;if(P<O){L+="|"}}if(Object.keys(M).length>1){L+=";"}}return L}var B=(function(){function K(T){var N=T;function W(Y){return N.nextSeq(Y)}function X(ab,aa,Y,Z){var ac=Z;if(ab==0){return function(){s.$apply(function(){ac.resolve()})}}else{console.log("lib ==>${contextPath}/cobis/web/views"+aa[Y]);return function(){e.$script("${contextPath}/cobis/web/views"+aa[Y],X(ab-1,aa,Y+1,ac))}}}function O(ab,aa,Y,Z){var ac=Z;if(ab==0){return function(){s.$apply(function(){ac.resolve()})}}else{console.log("lib ==>${contextPath}/cobis/web/views"+aa[Y]);return e.$script("${contextPath}/cobis/web/views"+aa[Y],O(ab-1,aa,Y+1,ac))}}function S(Y,Z,aa){switch(Z){case D.styles.Success:N.viewState[Y].statusStyle.success=true;N.viewState[Y].statusStyle.fail=false;N.viewState[Y].statusStyle.none=false;N.viewState[Y].statusStyle.numErrors=undefined;break;case D.styles.Fail:N.viewState[Y].statusStyle.success=false;N.viewState[Y].statusStyle.fail=true;N.viewState[Y].statusStyle.none=false;N.viewState[Y].statusStyle.numErrors=aa;break;default:N.viewState[Y].statusStyle.success=false;N.viewState[Y].statusStyle.fail=false;N.viewState[Y].statusStyle.none=true;N.viewState[Y].statusStyle.numErrors=undefined;break}}var U=function(){if(g.isDefined(N.parentVc)){return new K(N.parentVc)}};var Q={isDisabled:function(Y){return N.viewState[Y].disabled||N.viewState[Y].disabledingroup},isVisible:function(Y){return N.viewState[Y].visible},isReadOnly:function(Y){return N.viewState[Y].readonly},disable:function(aa,Y){if(g.isDefined(N.viewState[aa])&&!this.isDisabled(aa)){var Z={propertyType:"disabled",property:"disabled",id:aa,blockParent:Y,vc:N};l.setPropertyComponent(Z)}else{console.log("Can not be disabled, component not found "+aa)}},enable:function(Z){if(g.isDefined(N.viewState[Z])){var Y={propertyType:"disabled",property:"enable",id:Z,vc:N};l.setPropertyComponent(Y)}else{console.log("Can not be enable, component not found "+Z)}},hide:function(Z){if(g.isDefined(N.viewState[Z])){var Y={propertyType:"visible",property:"hide",id:Z,vc:N};l.setPropertyComponent(Y)}else{console.log("Can not be visible, component not found "+Z)}},show:function(Z){if(g.isDefined(N.viewState[Z])){var Y={propertyType:"visible",property:"show",id:Z,vc:N};l.setPropertyComponent(Y)}else{console.log("Can not be enable, component not found "+Z)}},readOnly:function(Z,Y){N.viewState[Z].readonly=Y},addStyle:function(ac,Z){var aa=[],ab=Z,Y=[];if(g.isDefined(N.viewState[ac])){aa=N.viewState[ac].style}if(!Array.isArray(aa)){if(g.isDefined(aa)){aa=N.viewState[ac].style.split(" ")}else{aa=[]}}g.forEach(aa,function(ad){if(ad!==ab){this.push(ad)}},Y);Y[Y.length]=Z;if(g.isDefined(N.viewState[ac])){N.viewState[ac].style=Y}},removeStyle:function(af,ab){var Z=N.viewState[af].style,ad=ab,aa=[],ac,Y,ae;g.forEach(Z,function(ag){if(ag!==ad){aa.push(ag)}},aa);N.viewState[af].style=aa;ac="#"+af;Y=d(ac);if(g.isDefined(Y)){ae=Y.data("role");if(ae==="extcombobox"){Y=Y.data("kendoExtComboBox");if(g.isDefined(Y)){Y.input.removeClass(ab)}}else{if(ae==="numerictextbox"){Y=Y.data("kendoNumericTextBox");if(g.isDefined(Y)){Y._text.removeClass(ab)}}}}},changeImageStyle:function(Z,Y){N.viewState[Z].imageId=Y},changeLabelImageStyle:function(Z,Y){if(N.viewState[Z].labelImageId){N.viewState[Z].labelImageId=Y}},changeTooltip:function(Z,Y){N.viewState[Z].tooltip=Y},focus:function(Y){l.component.focusControl(Y)},mode:function(Y){N.mode=Y;N.args.mode=Y},translate:function(Y){return w("translate")(Y)},label:function(ae,aa,ad,ac){var Y,Z={},ab;if(g.isDefined(ae)&&g.isDefined(N.viewState[ae])){if(g.isUndefined(ad)){ad=true}if(g.isDefined(aa)){if(g.isDefined(ac)&&g.isArray(ac)){for(ab=0;ab<ac.length;ab=ab+1){Z["p"+ab]=ac[ab]}N.viewState[ae].labelArgs=Z}N.viewState[ae].label=aa}Y=N.viewState[ae].label;if(ad===true){Y=w("translate")(N.viewState[ae].label,N.viewState[ae].labelArgs)}}return Y},format:function(Y,af,aa,ad,ag){var Z,ac,ah,ab,ai={},ae;if(g.isDefined(Y)){ab=N.viewState[Y];ac=d("#"+Y);if(g.isDefined(ab)&&g.isDefined(ac)){ah=ac.data("kendoNumericTextBox");if(g.isDefined(ah)){if(g.isDefined(af)){ab.format=af;ai.format=af}if(g.isDefined(aa)){ab.decimals=af;ai.decimals=aa}if(Object.keys(ai).length>0){ah.setOptions(ai);ae=ah.value();ah.value(ae)}Z=ab.format;if(g.isDefined(ad)){ab.prefix=ad}if(g.isDefined(ag)){ab.suffix=ag}}}}return Z},mask:function(Y,ag,ac,ae){var ad,ab,Z,aa,af={};if(g.isDefined(Y)){aa=N.viewState[Y];ab=d("#"+Y);if(g.isDefined(aa)&&g.isDefined(ab)){Z=ab.data("kendoExtMaskedTextBox");if(g.isDefined(Z)){if(g.isDefined(ag)){aa.mask=ag;af.mask=ag;Z.setOptions(af)}ad=aa.mask;if(g.isDefined(ac)){aa.prefix=ac}if(g.isDefined(ae)){aa.suffix=ae}}}}return ad},prefix:function(ab,aa){var Z,Y;if(g.isDefined(ab)){Y=N.viewState[ab];if(g.isDefined(Y)&&g.isDefined(aa)){Y.prefix=aa}Z=Y.prefix}return Z},suffix:function(ab,aa){var Z,Y;if(g.isDefined(ab)){Y=N.viewState[ab];if(g.isDefined(Y)&&g.isDefined(aa)){Y.suffix=aa}Z=Y.suffix}return Z},selectedText:function(af,Y,ac){var ab=N.catalogs[af],ae,aa,ad,Z=false;if(g.isDefined(ac)){ab=ab[ac.uid]}if(g.isUndefined(ab)){ad=N.viewState[af].queryId;ab=N.queries[ad];if(g.isUndefined(ab)){ab=N.queries[ad+"_"+af]}Z=true}if(g.isDefined(ab)&&ab instanceof f.data.DataSource){aa=ab.get(Y);if(g.isDefined(aa)){if(!Z){ae=aa.value}else{ae=aa[N.queryProperties[ad].columnValueForList]}}}return ae},refreshData:function(Z){var Y=N.catalogs[Z];if(g.isDefined(Y)&&Y instanceof f.data.DataSource){Y.read()}},enableValidation:function(aa,Z){Z=Number(Z);var Y=T.viewState[aa].validationCode;if(!isNaN(Z)){T.viewState[aa].validationCode=(Y|Z);d("#"+aa+"_DIV").addClass("cb-required")}else{h.error("wrong validatorId!!")}},disableValidation:function(aa,Z){Z=Number(Z);var Y=T.viewState[aa].validationCode;if(!isNaN(Z)&&Y>=Z){T.viewState[aa].validationCode=Y-Z;d("#"+aa+"_DIV").removeClass("cb-required")}else{h.error("wrong validatorId!!")}},lockScreen:function(Y,Z){h.info("lockScreen: "+Y);k(Z,1)},unlockScreen:function(Y){h.info("unlockScreen: "+Y);k(null,2)},template:function(af,aa){var Y,ac,ab,ad,Z,ae=function(ag,ah){if(g.isDefined(aa)){ah.template=aa;ag.setOptions({template:aa});if(g.isDefined(ag.dataSource)&&ag.dataSource.data().length>0){ag.refresh()}}};if(g.isDefined(af)){ac=N.viewState[af];ab=d("#"+af);if(g.isDefined(ac)&&g.isDefined(ab)){ad=ab.data("kendoExtComboBox")||ab.data("kendoExtDropDownList");if(g.isDefined(ad)){ae(ad,ac);Y=ac.template}else{if(g.isDefined(ab.data("$kendoExtComboBoxController"))){Z=g.element(ab).scope().$watch("comboBox."+af,function(ah,ag){if(ah!==ag){Z();ad=ab.data("kendoExtComboBox");if(g.isDefined(ad)){ae(ad,ac)}}})}}}}return Y},valueTemplate:function(ae,aa){var Z,ac,ab,Y,ad=function(af,ag){if(g.isDefined(aa)){ag.valueTemplate=aa;af.setOptions({valueTemplate:aa});if(g.isDefined(af.dataSource)&&af.dataSource.data().length>0){af.refresh()}}};if(g.isDefined(ae)){ac=N.viewState[ae];ab=d("#"+ae);if(g.isDefined(ac)&&g.isDefined(ab)){Y=ab.data("kendoExtDropDownList");if(g.isDefined(Y)){ad(Y,ac);Z=ac.template}}}return Z},getKendoContainer:function(Y){return l.container.getKendoContainer(Y)},setPlaceHolderLabel:function(aa,Z){Z=Z||"";var Y=this.translate(Z.indexOf(".")>4?Z.substring(0,Z.indexOf("."))+"."+D.labelTypes.LABEL+Z.substring(Z.indexOf(".")):Z);d("#"+aa).attr("placeholder",Y)}};var V={getPks:function(Y,ac){var ad=N.metadata.entities[Y],aa=ad._pks,ab={},Z;for(Z=0;Z<aa.length;Z=Z+1){ab[aa[Z]]=ac[aa[Z]]}return ab},getSelectedRows:function(ad){var Y=[],ab=d("#"+ad).data("kendoGrid"),aa,Z,ac;if(ab){ac=ab.select();if(ac&&ac.length>0){for(aa=0;aa<ac.length;aa=aa+1){Z=ab.dataItem(ac[aa]);Y.push(Z)}}}return Y},getRowByDsgnrId:function(aa,Z){var ae=N.model[aa],Y=ae.data(),ab,ad,ac;if(Z&&Y.length>0){for(ab=0;ab<Y.length;ab=ab+1){ad=Y[ab];ac=ad.get("dsgnrId");if(ac==Z){return ad}}}return null},addRow:function(Z,aa,Y){var ab=new N.types[Z](aa);N.model[Z].add(ab);if(typeof Y==="undefined"){Y=true}if(Y===true){N.model[Z].sync()}},updateRow:function(Z,aa,ab,Y){var ac=N.model[Z].at(aa),ad;for(ad in ab){if(!ab.hasOwnProperty(ad)){continue}if(ad!=="uid"&&ad!=="dirty"&&ad.substring(0,4)!=="org_"){ac.set(ad,ab[ad])}}if(typeof Y==="undefined"){Y=true}if(Y===true){N.model[Z].sync()}},updateRowByDsgnrId:function(aa,ad,Z){var Y=ad.dsgnrId,ac=N.model[aa],ab=this.getRowByDsgnrId(aa,Y),ae;for(ae in ad){if(!ad.hasOwnProperty(ae)){continue}if(ae!=="uid"&&ae!=="dirty"&&ae.substring(0,4)!=="org_"){if(b.utils.isRunOnLiferay()){ab.set(ae,ad[ae])}else{ab[ae]=ad[ae]}}}if(typeof Z==="undefined"){Z=true}if(Z===true){ac.sync()}},updateRowData:function(aa,Y,Z){if(Y!=="uid"&&Y!=="dirty"&&Y.substring(0,4)!=="org_"){aa.set(Y,Z)}},removeRow:function(Y,Z){var aa=N.model[Y].at(Z);N.model[Y].remove(aa);N.model[Y].sync()},removeRowByDsgnrId:function(Z,ac){var Y=ac.dsgnrId,ab=this.getRowByDsgnrId(Z,Y),aa=N.model[Z];aa.remove(ab);aa.sync()},removeAllRows:function(Y){var aa=N.model[Y],Z=aa.data().length;if(Z>0){aa.data([]);aa.sync()}},addAllRows:function(Z,Y,ab){var aa;if(Y!==null&&Y.length>0){if(typeof ab==="undefined"){ab=false}if(ab===true){N.model[Z].data(Y)}else{for(aa=0;aa<Y.length;aa=aa+1){this.addRow(Z,Y[aa],false)}}N.model[Z].sync()}},getDesignerData:function(Y){if(g.isDefined(Y[0]._reset)){return N.getDesignerData(Y)}else{var Z=w("translate")("DSGNR.SYS_DSGNR_MSGERRDTA_00049");h.warn(Z)}},hideColumn:function(Y,ab){var aa,ad,ac,Z;N.viewState[Y].column[ab].hidden=true;aa=d("#"+Y);if(aa.length>0){ad=aa.data("kendoGrid");if(g.isDefined(ad)&&ad!==null){ad.hideColumn(ab)}else{ac=g.element(aa).scope();if(g.isDefined(ac)){Z=ac.$watch("grids."+Y,function(ae,af){if(ae!==af){ae.hideColumn(ab);Z()}})}}}},hideDetailIcon:function(Y,aa){var ab=d("#"+Y+" tbody").find("tr[data-uid="+aa.uid+"]"),Z;if(g.isDefined(ab)){Z=ab.find(".k-hierarchy-cell a");if(g.isDefined(Z)){Z.hide()}}},showDetailIcon:function(Y,aa){var ab=d("#"+Y+" tbody").find("tr[data-uid="+aa.uid+"]"),Z;if(g.isDefined(ab)){Z=ab.find(".k-hierarchy-cell a");if(g.isDefined(Z)){Z.show()}}},showColumn:function(Y,ab){var aa,ad,ac,Z;N.viewState[Y].column[ab].hidden=false;aa=d("#"+Y);if(aa.length>0){ad=aa.data("kendoGrid");if(g.isDefined(ad)&&ad!==null){ad.showColumn(ab)}else{ac=g.element(aa).scope();if(g.isDefined(ac)){Z=ac.$watch("grids."+Y,function(ae,af){if(ae!==af){ae.showColumn(ab);Z()}})}}}},enabledColumn:function(Z,aa){N.viewState[Z].column[aa].enabled=true;var Y=N.viewState[Z].column[aa].componentId;G(function(){l.component.forceAttributeSetting(Y,"enabled",true)})},disabledColumn:function(Z,aa){N.viewState[Z].column[aa].enabled=false;var Y=N.viewState[Z].column[aa].componentId;G(function(){l.component.forceAttributeSetting(Y,"enabled",false)})},hideToolBarButton:function(Y,Z){N.viewState[Y].toolbar[Z].visible=false},showToolBarButton:function(Y,Z){N.viewState[Y].toolbar[Z].visible=true},addColumnStyle:function(af,ad,Y){var ac,aa,ae=N.viewState[af].column[ad].style,ab=Y,ag=[],Z;g.forEach(ae,function(ah){if(ah!==ab){this.push(ah)}},ag);ag[ag.length]=Y;N.viewState[af].column[ad].style=ag;ac=d("#"+af+" th[data-field='"+ad+"']");if(g.isDefined(ac)&&g.isDefined(ac[0])){aa=ac[0].className;Z=aa.indexOf(Y);if(Z===(-1)){ac[0].className=(aa+" "+Y).trim()}}},removeColumnStyle:function(af,ad,Y){var ac,aa,ae=N.viewState[af].column[ad].style,ab=Y,ah=[],Z,ag;g.forEach(ae,function(ai){if(ai!==ab){this.push(ai)}},ah);N.viewState[af].column[ad].style=ah;ac=d("#"+af+" th[data-field='"+ad+"']");if(g.isDefined(ac)&&g.isDefined(ac[0])){Z="\\b("+Y+")\\b";ag=new RegExp(Z,"g");aa=ac[0].className.replace(ag,"");aa=aa.replace(/\s\s/g," ").trim();ac[0].className=aa}},enableValidation:function(ac,ad,ab){ab=Number(ab);var Y=false,Z=N.viewState[ac].column[ad].validationCode,aa;if(!isNaN(ab)){N.viewState[ac].column[ad].validationCode=(Z|ab);Y=true;aa=N.viewState[ac].column[ad].componentId;if(g.isDefined(aa)){d("#"+aa).attr("data-validation-code",Z|ab)}}else{h.error("wrong validatorId!! ")}return Y},disableValidation:function(ac,ad,ab){ab=Number(ab);var Y=false,Z=N.viewState[ac].column[ad].validationCode,aa;if(!isNaN(ab)&&Z>=ab){N.viewState[ac].column[ad].validationCode=Z-ab;aa=N.viewState[ac].column[ad].componentId;Y=true;if(g.isDefined(aa)){d("#"+aa).attr("data-validation-code",Z-ab)}}else{h.error("wrong validatorId!! ")}return Y},addCellStyle:function(af,Z,ad,Y,aa){var ab=(g.isDefined(aa)&&aa===true)?Z.dsgnrId:Z.uid;if(typeof N.viewState[af].column[ad].element[ab]==="undefined"){N.viewState[af].column[ad].element[ab]={style:[]}}var ae=N.viewState[af].column[ad].element[ab].style,ac=Y,ag=[];g.forEach(ae,function(ah){if(ah!==ac){this.push(ah)}},ag);ag[ag.length]=Y;N.viewState[af].column[ad].element[ab].style=ag},removeCellStyle:function(aa,ae,ac,ab){if(typeof N.viewState[aa].column[ac].element[ae.uid]==="undefined"){N.viewState[aa].column[ac].element[ae.uid]={style:[]};return}var Y=N.viewState[aa].column[ac].element[ae.uid].style,ad=ab,Z=[];g.forEach(Y,function(af){if(af!==ad){this.push(af)}},Z);N.viewState[aa].column[ac].element[ae.uid].style=Z},hideGridRowCommand:function(Y,aa,Z,ab){this.addCellStyle(Y,aa,Z,"invisible",ab)},showGridRowCommand:function(Y,aa,Z){this.removeCellStyle(Y,aa,Z,"invisible")},addRowStyle:function(Z,ab,aa){var Y;if(typeof N.viewState[Z].rows[ab.uid]==="undefined"){N.viewState[Z].rows[ab.uid]={style:[]}}Y=d("#"+Z+" tbody");if(Y.find("tr[data-uid="+ab.uid+"]").hasClass(aa)===false){Y.find("tr[data-uid="+ab.uid+"]").addClass(aa);N.viewState[Z].rows[ab.uid].style.push(aa)}},removeRowStyle:function(aa,ac,ab){if(typeof N.viewState[aa].rows[ac.uid]==="undefined"){N.viewState[aa].rows[ac.uid]={style:[]}}var Y=d("#"+aa+" tbody");if(Y.find("tr[data-uid="+ac.uid+"]").hasClass(ab)===true){Y.find("tr[data-uid="+ac.uid+"]").removeClass(ab);var Z=N.viewState[aa].rows[ac.uid].style.indexOf(ab);N.viewState[aa].rows[ac.uid].style.splice(Z,1)}},resizeGridColumn:function(Z,af,ae){if(g.isDefined(N.viewState[Z])){if(g.isDefined(N.viewState[Z].column[af])){N.viewState[Z].column[af].width=ae;var ab=d("#"+Z),ad=ab.find(".k-grid-header-wrap").find("thead th[data-field='"+af+"']"),Y,ac,aa;ad=ad.length===0?ab.find(".k-grid-header-wrap").find("thead th:last-child"):ad;if(ad.length){Y=d.inArray(ad[0],ad.parent().children(":visible"));ac=ab.find(".k-grid-header-wrap").find("colgroup col").eq(Y);aa=ab.find(".k-grid-content").find("colgroup col").eq(Y);ac.css({width:ae});aa.css({width:ae})}}}},changeTooltip:function(Y,Z,aa){if(g.isDefined(N.viewState[Y])){if(g.isDefined(N.viewState[Y].column[Z])){N.viewState[Y].column[Z].tooltip=aa}}},changeImageStyle:function(Y,aa,Z){if(g.isDefined(N.viewState[Y])){if(g.isDefined(N.viewState[Y].column[aa])){N.viewState[Y].column[aa].imageId=Z}}},focusCommand:function(Z,Y,aa){if(typeof aa==="undefined"){aa=true}var ab=d("#"+Y);if(ab.length>0){l.component.focusControl(Y)}else{if(aa){if(!N.viewState[Z]){N.viewState[Z]={}}N.viewState[Z].pendingFocus=Y}}},title:function(Y,ad,af,ae,ab){var ac,Z={},aa;if(g.isDefined(Y)&&g.isDefined(N.viewState[Y])&&g.isDefined(N.viewState[Y].column)&&g.isDefined(N.viewState[Y].column[ad])){if(g.isUndefined(ae)){ae=true}if(g.isDefined(af)){N.viewState[Y].column[ad].title=af;if(ae===true){if(g.isDefined(ab)&&g.isArray(ab)){for(aa=0;aa<ab.length;aa=aa+1){Z["p"+aa]=ab[aa]}N.viewState[Y].column[ad].titleArgs=Z}ac=w("translate")(N.viewState[Y].column[ad].title,N.viewState[Y].column[ad].titleArgs)}}if(ae===true&&g.isUndefined(ac)){ac=w("translate")(N.viewState[Y].column[ad].title,N.viewState[Y].titleArgs)}else{if(g.isUndefined(ac)){ac=N.viewState[Y].column[ad].title}}}return ac},format:function(Z,ae,af,Y){var ac,aa,ab,ad;if(g.isDefined(Z)&&g.isDefined(ae)){aa=N.viewState[Z];if(g.isDefined(aa)){ab=aa.column[ae];if(g.isDefined(ab)){if(g.isDefined(af)){ab.format=af}if(g.isDefined(Y)){ab.decimals=Y}if(g.isDefined(af)||g.isDefined(Y)){ad=d("#"+Z).data("kendoGrid");if(g.isDefined(ad)){ad.refresh()}}ac=ab.format}}}return ac},mask:function(Z,ac,Y){var ad,aa,ab;if(g.isDefined(Z)&&g.isDefined(ac)){aa=N.viewState[Z];if(g.isDefined(aa)){ab=aa.column[ac];if(g.isDefined(ab)){if(g.isDefined(Y)){ab.mask=Y}ad=ab.mask}}}return ad},columnPrefix:function(Y,ad,ac){var ab,Z,aa;if(g.isDefined(Y)&&g.isDefined(ad)){Z=N.viewState[Y];if(g.isDefined(Z)){aa=Z.column[ad];if(g.isDefined(aa)){if(g.isDefined(ac)){aa.prefix=ac}ab=aa.prefix}}}return ab},cellPrefix:function(Y,af,ae,ad){var ac,aa,ab,Z;if(g.isDefined(Y)&&g.isDefined(ae)){aa=N.viewState[Y];if(g.isDefined(aa)){ab=aa.column[ae];if(g.isDefined(ab)&&g.isDefined(ab.element)&&g.isDefined(af)&&g.isDefined(af.uid)){Z=ab.element[af.uid];if(g.isUndefined(Z)){Z={};ab.element[af.uid]=Z}if(g.isDefined(ad)){Z.prefix=ad}ac=Z.prefix}}}return ac},columnSuffix:function(Y,ab,ad){var ac,Z,aa;if(g.isDefined(Y)&&g.isDefined(ab)){Z=N.viewState[Y];if(g.isDefined(Z)){aa=Z.column[ab];if(g.isDefined(aa)){if(g.isDefined(ad)){aa.suffix=ad}ac=aa.suffix}}}return ac},cellSuffix:function(Y,ad,ac,af){var ae,aa,ab,Z;if(g.isDefined(Y)&&g.isDefined(ac)){aa=N.viewState[Y];if(g.isDefined(aa)){ab=aa.column[ac];if(g.isDefined(ab)&&g.isDefined(ab.element)&&g.isDefined(ad)&&g.isDefined(ad.uid)){Z=ab.element[ad.uid];if(g.isUndefined(Z)){Z={};ab.element[ad.uid]=Z}if(g.isDefined(af)){Z.suffix=af}ae=Z.suffix}}}return ae},editing:function(Z){var aa=d("#"+Z).data("kendoGrid"),ac,ad,ab,Y=false;if(g.isDefined(aa)){if(g.isDefined(aa.tbody)){ac=aa.tbody[0].rows;if(ac.length>0){for(ab in ac){ad=ac[ab];if("ng-scope k-grid-edit-row"===ad.className){Y=true;break}}}}}return Y},template:function(Z,aa,ab){var Y;if(g.isDefined(N.viewState[Z])){if(g.isDefined(N.viewState[Z].column[aa])){if(g.isDefined(N.viewState[Z].column[aa].template)){N.viewState[Z].column[aa].template=ab;Y=ab}}}return Y},valueTemplate:function(Z,aa,ab){var Y;if(g.isDefined(N.viewState[Z])){if(g.isDefined(N.viewState[Z].column[aa])){if(g.isDefined(N.viewState[Z].column[aa].valueTemplate)){N.viewState[Z].column[aa].valueTemplate=ab;Y=ab}}}return Y},filter:function(Y,aa){var Z,ab;Z=d("#"+Y);if(g.isDefined(Z)){ab=Z.data("kendoGrid").dataSource;if(g.isUndefined(aa)){ab.filter("")}else{ab.filter(aa)}}},expandRow:function(Y,ab){var Z=d("#"+Y),aa=Z.data("kendoGrid");if(g.isDefined(aa)&&g.isDefined(ab)&&g.isDefined(ab.uid)){aa.expandRow(d("[data-uid='"+ab.uid+"']"))}},collapseRow:function(Y,ad,Z){var aa=d("#"+Y),ac=aa.data("kendoGrid");if(g.isDefined(ac)&&g.isDefined(ad)&&g.isDefined(ad.uid)){ac.collapseRow(d("[data-uid='"+ad.uid+"']"));if(g.isDefined(Z)&&Z){var ab=g.element(d("tr[data-uid="+ad.uid+"] + tr.k-detail-row td.k-detail-cell > div")).scope();d("tr[data-uid="+ad.uid+"] + tr.k-detail-row").remove();if(g.isDefined(ab)){ab.$destroy()}N.removeChildVc(ad.uid)}}},fillFiltersQuery:function(aa,Z){if(g.isDefined(N.request.qr)){N.request.qr[aa].filters=Z}else{var Y=aa+"_filters";N.queries[Y]=Z}},isRowExpanded:function(Y){return d("#"+Y).find(".k-detail-row").length>0},refresh:function(ab,Y,ad){var aa=d("#"+ab),Z,ac;if(aa.length>0){if(g.isDefined(Y)&&Y!==null){Z=N.grids[ab];if(g.isDefined(Z)){ac=Z.queryId;this.fillFiltersQuery(ac,Y)}}aa.data("kendoGrid").dataSource.read({refresh:true}).then(function(){if(g.isDefined(ad)){ad()}});aa.data("kendoGrid").dataSource.page(1)}},refreshAndSelect:function(ab,Y,Z){var aa=this;this.refresh(ab,Y,function(){aa.selectRow(ab,Z)})},selectRow:function(af,al,ae){ae=ae||1;var Y=d("#"+af).data("kendoGrid"),ab=Y.dataSource,ag,ah,ac=1,aj,am,aa=f.data.Query.process(ab.data(),{filter:al}).data,ak=(parseInt(Y._data.length,10)-1),Z=aa[0]?aa[0].uid:"",ad=0,ai;ab.page(1);for(ai=0;ai<Y._data.length;ai=ai+1){if(Y._data[ai].uid===Z){ad=ai;break}}if((aa.length>0)&&(ae>0)&&((ae-1)<aa.length)){for(ag=0;ag<aa.length;ag+=1){aj='[data-uid="'+aa[ag].uid+'"]';for(ah=ac;ah<=ab.totalPages();ah+=1){if(ae!==1){if(ag===(ak-(ad))){ac=ah;ab.page(ah)}}else{if(ah!==ac){ab.page(ah)}}am=d(aj);if(am.length>0){if(ag===(ae-1)){Y.select(am);return aa[ag]}}}}}else{F.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFUP_00049")}},lastRow:function(ab){var Y=d("#"+ab).data("kendoGrid"),ac=Y.dataSource,aa=ac._data.length,Z;if((aa-1)>=0){Z=ac.data()[aa-1]}return Z},setAppendRecordsParams:function(Z,ab,Y){if(Y.config&&Y.config.appendRecords&&Y.config.appendRecords===true){var aa=this.lastRow(Z);if(aa&&g.isArray(ab)){g.forEach(ab,function(ac){var ad=aa[ac];if(g.isDefined(ad)){if(typeof ad==="string"){ad=ad.trim()}Y.parameters[ac]=ad}})}}},moveToolbarToTheBottom:function(Z){var Y=d("#"+Z+" .k-grid-content");if(Y.size()>0){d("#"+Z).find(".k-grid-toolbar").insertAfter(Y)}else{d("#"+Z).find(".k-grid-toolbar").insertAfter(d("#"+Z+" table"))}}};var M={getErrorsGroup:function(ae,ag){var ad=0,Z="#"+ae,ac=d(Z),af=false,Y,ab="";if(typeof ac!=="undefined"&&ac!==null){Y=ac.data("kendoValidator");if(typeof Y!=="undefined"&&Y!==null){af=true}else{Z+="_VAL";ac=d(Z);if(ac!==null&&typeof ac!=="undefined"){Y=ac.data("kendoValidator");if(typeof Y!=="undefined"&&Y!==null){af=true}}}if(af){if(!Y.validate()){ad=Y.errors().length;var aa=l.component.getElementFocusError(Y);if(aa===null){return 0}if(ag||ag===null){l.component.focusError(Y)}else{Y.hideMessages()}}}else{ab=w("translate")("DSGNR.SYS_DSGNR_MSGERRGRP_00050");h.warn(msg+ae)}}else{ab=w("translate")("DSGNR.SYS_DSGNR_MSGERRGRP_00051");h.warn(msg+ae)}return ad},setErrorsGroup:function(Y,Z){if(typeof Z==="undefined"||Z==null){Z=-1}if(Z>0){S(Y,D.styles.Fail,Z)}else{if(Z==0){S(Y,D.styles.Success,Z)}else{S(Y,D.styles.None,Z)}}},validateInput:function(ad,aa){var ac,Z,ab,ae,Y;if(g.isUndefined(ad)){return undefined}ae="#"+ad;ac=d(ae);if(ac.length===0){return undefined}Z=ac.parents("[kendo-validator]");if(Z.length===0){return undefined}ab=Z.data("kendoValidator");if(g.isUndefined(ab)){return undefined}Y=ab.validateInput(ac);if(Y===false){if(g.isUndefined(aa)){aa=true}if(aa===true){l.component.focusControl(ad)}else{ab.hideMessages()}}return Y}};var R={label:"",address:{moduleId:undefined,subModuleId:undefined,taskId:undefined,taskVersion:undefined,viewContainerId:undefined},customAddress:{id:undefined,url:undefined,controller:undefined,useMinification:true},queryParameters:{mode:undefined,pk:undefined},modalProperties:{height:undefined,size:undefined,callFromGrid:false},popoverProperties:{},scripts:[],loadSequentialMode:true,dialogParameters:{},openPageDesigner:false,customDialogParameters:{},detailProperties:{},navigate:function(ak){var ae=this,ai=v.routes,ab="/"+this.address.viewContainerId,aa,aj,ag,af,Y,ad,Z,ah=b.utils.isRunOnLiferay();if(l.task.isNewDesignerFrameworkVersion()){k(null,1)}af=!ai[ab]&&N.routeProvider?true:false;if(af){if(!ah){Z=D.typeNavigation.NORMAL}else{if(ah&&"portletName" in this.address&&"navigationInside" in this.address&&this.address.navigationInside){Z=D.typeNavigation.INPORTLET}else{if(ah&&"portletName" in this.address&&(!("navigationInside" in this.address)||("navigationInside" in this.address&&!this.address.navigationInside))){Z=D.typeNavigation.OUTPORTLET}}}switch(Z){case"inPortlet":Y=J.getDataToNavigate(this.address,true);aa=Y.templateUrl;aj=Y.customJs;ag=Y.controllerUrl;ad=this.address.viewContainerId+"_CTRL";break;case"outPortlet":Y=J.getDataToNavigate(this.address,false);this.address.pageURL=Y.portletUrl.url;break;case"normal":aa="${contextPath}/cobis/web/views/"+this.address.moduleId+"/"+this.address.subModuleId+"/"+this.address.taskId+"/"+this.address.taskVersion+"/"+this.address.viewContainerId;aj=aa+"_CUSTOM.js";ag=aa+l.minification.getMinificationExt()+".js";ad=this.address.viewContainerId+"_CTRL";aa=aa+"_FORM.html";break;default:break}}this.dialogParameters.controlId=ak;N.dialogParameters=this.dialogParameters;N.customDialogParameters=this.customDialogParameters;try{if(Z!=="outPortlet"){if(af){N.routeProvider.when(ab,{templateUrl:aa,controller:ad,label:this.label,resolve:{dependencies:["$q","$rootScope",function(an,al){var am=an.defer();e.$script(ag,function(){e.$script(aj,function(){al.$apply(function(){am.resolve()})})});return am.promise}],specificTranslations:["$translatePartialLoader","$translate","asyncLoader",function(al,am,an){if(b.utils.isRunOnLiferay()){an({moduleId:ae.address.moduleId,contextPath:"assets-libs-"+ae.address.moduleId+".portlet"})}else{al.addPart(ae.address.moduleId);if(g.isDefined(ae.scripts)){if(g.isArray(ae.scripts)&&ae.scripts.length>0){g.forEach(ae.scripts,function(ao){al.addPart(ao.module)})}else{if(d.trim(ae.scripts.module).length>0){al.addPart(ae.scripts.module)}}}return am.refresh()}}]}})}N.url(this.address.viewContainerId,this.queryParameters)}else{N.url(this.address.viewContainerId,this.queryParameters,this.address.pageURL)}}catch(ac){h.error(ac.message)}this.dispatched=true},customNavigate:function(ae){var ad=this,ah=v.routes,Z="/"+this.customAddress.id,Y,af,ab,ac=this.customAddress.useMinification,ag,aa;if(l.task.isNewDesignerFrameworkVersion()){k(null,1)}if(!ah[Z]&&N.routeProvider){console.log("loading custom url: "+this.customAddress.url);if(ae){af="${contextPath}/"+ae}else{af="${contextPath}/cobis/web/views/"}ag=af.length;if(ag>0){aa=af.charAt(ag-1);if(aa!=="/"&&aa!=="\\"){af=af+"/"}}Y=af+this.customAddress.url;console.log("loading templateUrl: "+Y);N.routeProvider.when(Z,{templateUrl:Y,controller:this.customAddress.controller,label:this.label,resolve:{dependencies:["$ocLazyLoad","$translatePartialLoader","$translate",function(an,al,am){var ak=function(ao){var ap=[];for(ab=0;ab<ao.files.length;ab=ab+1){ap.push(af+l.minification.getCustomFilePath(ao.files[ab],ac))}return{name:ao.module,files:ap}},ai=function(ao){var ap=g.module(ao,[]);ap.run(["$translatePartialLoader","$translate",function(aq,ar){aq.addPart(ao);ar.refresh()}])},aj=[];if(g.isArray(ad.scripts)){for(ab=0;ab<ad.scripts.length;ab=ab+1){ai(ad.scripts[ab].module);aj.push(ak(ad.scripts[ab]))}}else{ai(ad.scripts.module);aj.push(ak(ad.scripts))}return an.load(aj)}]}})}N.customDialogParameters=this.customDialogParameters;N.url(this.customAddress.id);this.dispatched=true},openModalWindow:function(ad,af){var ab=this,Y,aa,ae,Z=s.$new(),ac;if(l.task.isNewDesignerFrameworkVersion()){k(null,1)}console.log("opening ModalWindow: "+this.address.viewContainerId);if(b.utils.isRunOnLiferay()){ac=J.templateUrlOpenModal(this.address).templateUrl;aa=J.templateUrlOpenModal(this.address).controllerUrl;ae=J.templateUrlOpenModal(this.address).customJs}else{ac="${contextPath}/cobis/web/views/"+this.address.moduleId+"/"+this.address.subModuleId+"/"+this.address.taskId+"/"+this.address.taskVersion+"/"+this.address.viewContainerId;ae=ac+"_CUSTOM.js";aa=ac+l.minification.getMinificationExt()+".js";ac=ac+"_FORM.html"}if(g.isDefined(this.queryParameters)){Z.queryParameters=this.queryParameters}if(typeof this.modalProperties.height==="number"&&isFinite(this.modalProperties.height)){Y="style='height:"+this.modalProperties.height+"px;'"}else{Y="style='height:auto;'"}if(this.modalProperties.size==="small"){this.modalProperties.size="sm"}else{if(this.modalProperties.size==="large"){this.modalProperties.size="lg"}}N.addChildVc(this.address.viewContainerId);if(!N.dialogParameters.isModal){this.dialogParameters.controlId=ad;N.dialogParameters=this.dialogParameters}this.openPageDesigner=true;N.openPageDesigner=this.openPageDesigner;N.customDialogParameters=this.customDialogParameters;Z.customDialogParameters=this.customDialogParameters;N.modalInstances[this.address.viewContainerId]=t.open({template:"<div class='modal-header'><button type='button' class='close' data-dismiss='modal' ng-click='vc.dismissModal($dismiss)'><span aria-hidden='true'>&times;</span><span class='sr-only'>Close</span></button><h4 class='modal-title'>{{'"+this.label+"'|translate}}</h4></div><div kendo-validator='validator' k-options='validatorOptions' class='modal-body' "+Y+" ng-include src=\"'"+ac+"'\" onload='runLifeCycle()'></div>",controller:this.address.viewContainerId+"_CTRL",scope:Z,keyboard:false,backdrop:"static",closeButtonText:"Close",size:this.modalProperties.size,resolve:{dependencies:["$q","$rootScope",function(ai,ag){var ah=ai.defer();e.$script(aa,function(){e.$script(ae,function(){ag.$apply(function(){ah.resolve()})})});return ah.promise}],specificTranslations:["$translatePartialLoader","$translate","asyncLoader",function(ag,ah,ai){if(b.utils.isRunOnLiferay()){ai({moduleId:ab.address.moduleId,contextPath:"assets-libs-"+ab.address.moduleId+".portlet"})}else{ag.addPart(ab.address.moduleId);if(g.isDefined(ab.scripts)){if(g.isArray(ab.scripts)&&ab.scripts.length>0){g.forEach(ab.scripts,function(aj){ag.addPart(aj.module)})}else{if(d.trim(ab.scripts.module).length>0){ag.addPart(ab.scripts.module)}}}return ah.refresh()}}]}});N.modalInstances[this.address.viewContainerId].result.then(function(ag){N.handlerCloseModal({controlId:ad,viewContainerId:ab.address.viewContainerId,modelRow:af,resultModal:ag,callFromGrid:ab.modalProperties.callFromGrid})},function(ag){console.log("Modal dismissed at: "+new Date());N.handlerCloseModal({controlId:ad,viewContainerId:ab.address.viewContainerId,modelRow:af,resultModal:ag,callFromGrid:ab.modalProperties.callFromGrid})})["finally"](function(){N.modalInstances[ab.address.viewContainerId]=undefined;N.dialogParameters={}})},openCustomModalWindow:function(ab,ad){var Z=this,Y,aa,ac=this.customAddress.useMinification;if(l.task.isNewDesignerFrameworkVersion()){k(null,1)}if(b.utils.isRunOnLiferay()){J.openCustomModal(ab,ad,N,Z)}else{console.log("loading custom url: "+this.customAddress.url);aa="${contextPath}/cobis/web/views/"+this.customAddress.url;if(typeof this.modalProperties.height==="number"&&isFinite(this.modalProperties.height)){Y="style='height:"+this.modalProperties.height+"px;'"}else{Y=""}if(this.modalProperties.size==="small"){this.modalProperties.size="sm"}else{if(this.modalProperties.size==="large"){this.modalProperties.size="lg"}}N.addChildVc(this.customAddress.id);N.customDialogParameters=this.customDialogParameters;if(this.customAddress.url!==undefined){N.modalInstances[this.customAddress.id]=t.open({template:"<div class='modal-header'><button type='button' class='close' data-dismiss='modal' ng-click=\"$dismiss('close')\"><span aria-hidden='true'>&times;</span><span class='sr-only'>Close</span></button><h4 class='modal-title'>"+this.label+"</h4></div><div class='modal-body' "+Y+"  ng-include src=\"'"+aa+"'\" ></div>",controller:this.customAddress.controller,keyboard:false,backdrop:"static",closeButtonText:"Close",size:this.modalProperties.size,resolve:{dependencies:["$ocLazyLoad","$translatePartialLoader","$translate",function(ak,ai,aj){var ag=function(al){var an=[],am;for(am=0;am<al.files.length;am=am+1){an.push("${contextPath}/cobis/web/views/"+l.minification.getCustomFilePath(al.files[am],ac))}return{name:al.module,files:an}},ae=function(al){var am=g.module(al,[]);am.run(["$translatePartialLoader","$translate",function(an,ao){an.addPart(al);ao.refresh()}])},af=[],ah;if(g.isArray(Z.scripts)){for(ah=0;ah<Z.scripts.length;ah=ah+1){ae(Z.scripts[ah].module);af.push(ag(Z.scripts[ah]))}}else{ae(Z.scripts.module);af.push(ag(Z.scripts))}return ak.load(af)}]}});N.modalInstances[this.customAddress.id].result.then(function(ae){N.handlerCloseModal({controlId:ab,viewContainerId:Z.customAddress.id,modelRow:ad,resultModal:ae,callFromGrid:Z.modalProperties.callFromGrid})},function(ae){if(ae==="close"){ae={dialogCloseResult:1,dialogCloseType:1}}N.handlerCloseModal({controlId:ab,viewContainerId:Z.customAddress.id,modelRow:ad,resultModal:ae,callFromGrid:Z.modalProperties.callFromGrid})})["finally"](function(){N.modalInstances[this.customAddress.id]=undefined;N.dialogParameters={}})}else{h.error("Error customAddress.url is undefined")}}},openDetailTemplate:function(ac,ab){var ad=this,af,ah,ai,Z,aa,ag,ae,Y;if(g.isDefined(N.grids[ac])){console.log("opening detailTemplate: "+this.address.viewContainerId);if(b.utils.isRunOnLiferay()){aa="/o/"+this.address.portletName+"/";ag="_FORM.jsp";ae=".js"}else{aa="${contextPath}/cobis/web/views/";ag="_FORM.html";ae=l.minification.getMinificationExt()+".js"}Z=aa+this.address.moduleId+"/"+this.address.subModuleId+"/"+this.address.taskId+"/"+this.address.taskVersion+"/"+this.address.viewContainerId;ah=Z+"_CUSTOM.js";af=Z+ae;Z=Z+ag;ai=this.address.viewContainerId+"_CTRL";this.dialogParameters.controlId=ac;N.dialogParameters=this.dialogParameters;N.customDialogParameters=this.customDialogParameters;Y={controllerJs:af,fileJs:ah};N.grids[ac].view={controller:ai,scripts:Y,isCustom:false,moduleName:this.address.moduleId,viewContainerId:this.address.viewContainerId,templateUrl:Z,queryParameters:ad.queryParameters};delete N.grids[ac].customView}},openCustomDetailTemplate:function(ae,af){var ai=this,Z="${contextPath}/cobis/web/views/"+this.customAddress.url,ab,Y=[],ag,aa,ad=[],ac,ah=this.customAddress.useMinification;if(g.isDefined(N.grids[ae])){console.log("loading custom url: "+this.customAddress.url);N.customDialogParameters=this.customDialogParameters;ab=function(aj){for(ag=0;ag<aj.files.length;ag=ag+1){Y.push("${contextPath}/cobis/web/views/"+l.minification.getCustomFilePath(aj.files[ag],ah))}return{name:aj.module,files:Y}};ac=function(aj){aa=g.module(aj,[]);aa.run(["$translatePartialLoader","$translate",function(ak,al){ak.addPart(aj);al.refresh()}])};if(g.isArray(ai.scripts)){for(ag=0;ag<ai.scripts.length;ag=ag+1){ac(ai.scripts[ag].module);ad.push(ab(ai.script.files[ag]))}}else{ac(ai.scripts.module);ad.push(ab(ai.scripts))}N.grids[ae].customView={id:this.customAddress.id,templateUrl:Z,scripts:ad};delete N.grids[ae].view}},registerView:function(ac){var ae=N.viewState[ac],ad,aa,ab,af,ag,Z,Y;if(g.isDefined(ae)){if(g.isDefined(ae.view)){if(g.isDefined(this.address)&&g.isDefined(this.address.viewContainerId)){console.log("opening viewContainer: "+this.address.viewContainerId);Z="${contextPath}/cobis/web/views/"+this.address.moduleId+"/"+this.address.subModuleId+"/"+this.address.taskId+"/"+this.address.taskVersion+"/"+this.address.viewContainerId;aa="${contextPath}/cobis/web/views/"+this.address.moduleId+"/assets/scripts/"+this.address.moduleId+".js";ab="${contextPath}/cobis/web/views/"+this.address.moduleId+"/assets/styles/"+this.address.moduleId+".css";af=Z+"_CUSTOM.js";ad=Z+l.minification.getMinificationExt()+".js";Z=Z+"_FORM.html";this.dialogParameters.controlId=ac;N.dialogParameters=this.dialogParameters;N.customDialogParameters=this.customDialogParameters;ag=this.address.viewContainerId+"_CTRL";Y={moduleJs:aa,controllerJs:ad,fileJs:af};if(g.isDefined(ae.view)&&g.isDefined(ae.view.viewContainerId)&&(ae.view.viewContainerId===this.address.viewContainerId)){N.removeChildVc(ae.view.viewContainerId)}if(g.isDefined(ae.customView)&&g.isDefined(ae.customView.id)&&(ae.customView.id===this.address.viewContainerId)){N.removeChildVc(ae.customView.id)}N.addChildVc(this.address.viewContainerId);ae.view={controller:ag,scripts:Y,styles:ab,isCustom:false,moduleName:this.address.moduleId,viewContainerId:this.address.viewContainerId,queryParameters:this.queryParameters,templateUrl:Z};ae.customView={}}else{ae.view={};ae.customView={}}}else{console.log("GroupId "+ac+" doesn't support a custom page")}}else{console.log("GroupId "+ac+" doesn't exist")}},registerCustomView:function(ad,ah){var ag=this,ak=N.viewState[ad],Z,ab,ac=[],ae,Y,ai,af=this.customAddress.useMinification,aj=0,aa;if(g.isDefined(ak)){if(g.isDefined(ak.customView)){if(g.isDefined(this.customAddress)&&g.isDefined(this.customAddress.url)){if(ah){ai="${contextPath}/"+ah}else{ai="${contextPath}/cobis/web/views/"}console.log("loading custom url: "+this.customAddress.url);aj=ai.length;if(aj>0){aa=ai.charAt(aj-1);if(aa!=="/"&&aa!=="\\"){ai=ai+"/"}}aj=this.customAddress.url.length;if(aj>0){aa=this.customAddress.url.charAt(0);if(aa=="/"||aa=="\\"){this.customAddress.url=this.customAddress.url.substr(1)}}Y=ai+this.customAddress.url;console.log("templateUrl: "+Y);this.dialogParameters.controlId=ad;N.dialogParameters=this.dialogParameters;N.customDialogParameters=this.customDialogParameters;Z=function(al){var an=[],am;for(am=0;am<al.files.length;am=am+1){an.push(ai+l.minification.getCustomFilePath(al.files[am],af))}return{name:al.module,files:an}};ab=function(al){var am=g.module(al,[]);am.run(["$translatePartialLoader","$translate",function(an,ao){an.addPart(al);ao.refresh()}])};if(g.isArray(ag.scripts)){for(ae=0;ae<ag.scripts.length;ae=ae+1){ab(ag.scripts[ae].module);ac.push(Z(ag.scripts[ae]))}}else{ab(ag.scripts.module);ac.push(Z(ag.scripts))}if(g.isDefined(ak.view)&&g.isDefined(ak.view.viewContainerId)){N.removeChildVc(ak.view.viewContainerId)}if(g.isDefined(ak.customView)&&g.isDefined(ak.customView.id)){N.removeChildVc(ak.customView.id)}N.addChildVc(this.customAddress.id);ak.customView={id:this.customAddress.id,templateUrl:Y,scripts:ac};ak.view={}}else{ak.customView={};ak.view={}}}else{console.log("GroupId "+ad+" doesn't support a custom page")}}else{console.log("GroupId "+ad+" doesn't exist")}},openPopover:function(al){if(g.isUndefined(C)){throw new Error("$designerPopover is not available.")}var ag=this,ai,am,ak,ab=this.address.viewContainerId,ad,af=s.$new(),aa,ac,ae,Z,aj,ah,Y;if(b.utils.isRunOnLiferay()){Z="/o/"+this.address.portletName+"/";aj="_FORM.jsp";ah=".js"}else{Z="${contextPath}/cobis/web/views/";aj="_FORM.html";ah=l.minification.getMinificationExt()+".js"}Y=Z+this.address.moduleId+"/"+this.address.subModuleId+"/"+this.address.taskId+"/"+this.address.taskVersion+"/"+this.address.viewContainerId;ak=Y+"_CUSTOM.js";ai=Y+ah;Y=Y+aj;am=this.address.viewContainerId+"_CTRL";if(g.isDefined(this.queryParameters)){af.queryParameters=this.queryParameters}N.addChildVc(this.address.viewContainerId);this.dialogParameters.controlId=al;N.dialogParameters=this.dialogParameters;N.customDialogParameters=this.customDialogParameters;aa={templateUrl:Y,controller:am,scope:af,resolve:{dependencies:["$q","$rootScope",function(ap,an){var ao=ap.defer();e.$script(ai,function(){e.$script(ak,function(){an.$apply(function(){ao.resolve()})})});return ao.promise}],specificTranslations:["$translatePartialLoader","$translate","asyncLoader",function(an,ao,ap){if(b.utils.isRunOnLiferay()){ap({moduleId:ag.address.moduleId,contextPath:"assets-libs-"+ag.address.moduleId+".portlet"})}else{an.addPart(ag.address.moduleId);if(g.isDefined(ag.scripts)){if(g.isArray(ag.scripts)&&ag.scripts.length>0){g.forEach(ag.scripts,function(aq){an.addPart(aq.module)})}else{if(d.trim(ag.scripts.module).length>0){an.addPart(ag.scripts.module)}}}return ao.refresh()}}]}};ac=d("#"+al);if(ac.length>0){ae=ac.prop("tagName");if(ae!=="A"&&ae!=="BUTTON"){ac=d("#"+al+"_DIV")}aa=g.extend({},aa,this.popoverProperties);ad=C.open(ac,aa);N.modalInstances[ab]=ad;ad.result.then(function(an){N.modalInstances[ab]=undefined;N.afterCloseModal(al,ag.address.viewContainerId,an)},function(){N.modalInstances[ab]=undefined;console.log("Popover dismissed")})["finally"](function(){})}else{throw new Error('Element "'+al+'" was not found.')}},openCustomPopover:function(ah){if(g.isUndefined(C)){throw new Error("$designerPopover is not available.")}var ag=this,Z=this.customAddress.id,ab,ad=s.$new(),aa,ac,ae,Y="${contextPath}/cobis/web/views/"+this.customAddress.url,ai=this.customAddress.controller,af=this.customAddress.useMinification;if(g.isDefined(this.queryParameters)){ad.queryParameters=this.queryParameters}N.addChildVc(this.customAddress.id);this.dialogParameters.controlId=ah;N.dialogParameters=this.dialogParameters;N.customDialogParameters=this.customDialogParameters;aa={templateUrl:Y,controller:ai,scope:ad,resolve:{dependencies:["$q",function(ak){var am=[],an,al=function(ao){var aq=[],ap;for(ap=0;ap<ao.files.length;ap=ap+1){aq.push("${contextPath}/cobis/web/views/"+l.minification.getCustomFilePath(ao.files[ap],af))}return{name:ao.module,files:aq}},aj=function(ao){var ap=g.module(ao,[]);ap.run(["$translatePartialLoader","$translate",function(aq,ar){aq.addPart(ao);ar.refresh()}])};if(g.isArray(ag.scripts)){for(an=0;an<ag.scripts.length;an=an+1){aj(ag.scripts[an].module);am.push(al(ag.scripts[an]))}}else{aj(ag.scripts.module);am.push(al(ag.scripts))}return j.load(am)}]}};ac=d("#"+ah);if(ac.length>0){ae=ac.prop("tagName");if(ae!=="A"&&ae!=="BUTTON"){ac=d("#"+ah+"_DIV")}aa=g.extend({},aa,this.popoverProperties);ab=C.open(ac,aa);ab.opened.then(function(){N.modalInstances[Z]=ab});ab.result.then(function(aj){N.modalInstances[Z]=undefined;N.afterCloseModal(ah,ag.customAddress.id,aj)},function(){N.modalInstances[Z]=undefined;console.log("Popover dismissed")})["finally"](function(){})}else{throw new Error('Element "'+ah+'" was not found.')}},isModal:function(){return N.isModal()},getCustomDialogParameters:function(){if(g.isDefined(N.parentVc)){return N.parentVc.customDialogParameters}else{return N.customDialogParameters}},setCustomDialogResponse:function(Y){if(g.isDefined(N.parentVc)&&g.isDefined(Y)){N.parentVc.customDialogResponse=Y}},closeModal:function(Y){if(g.isDefined(N.parentVc)&&g.isDefined(Y)){N.parentVc.customDialogResponse=Y;N.closeModal(Y)}},dispatched:false};var P={http:I,resource:r,timeout:G,q:E};var L=function(ay,ak,ax,ah,au,al,ac){var aq=ay,at=N.uploaders[aq].maxSizeInMB,af=N.uploaders[aq].confirmUpload,ao=N.uploaders[aq].relativePath,am=N.uploaders[aq].visualAttributeModel,aj=N.uploaders[aq].gridFieldName,aw=N.uploaders[aq].queryViewId,ar="#",Y="${contextPath}/cobis/web/cobis-designer-engine-web/actions/fileupload?",ap=null,ai,ag,ab,aa,av,ae,Z,ad,an;if(aj){ar+=aq+"_gridUploader"}else{ar+="fileUploader"}g.element(ar).attr("visualAttributeId",aq);ai=function(az,aB,aA){at=az;af=aB;ao=aA;g.element(ar).data("kendoUpload").options.async.saveUrl=Y+"maxFileSize"+at+"&relativePath="+ao};ag=function(aB,az,aA){if((at)&&(az.size>(at*1024000))){console.log("Error en archivo "+az.name+", supera el tamano maximo permitido.");F.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFUP_00045");ai(10,false,null);aB.preventDefault();aA.$apply()}};ab=function(az){if(aj){T.viewState[aw].column[aj].disabledUpload=true;s.$apply()}else{az.vc.viewState[aq].disableUpload=true;az.$apply()}};Z=function(aA){var az;if(ac){if(au==="executeCommand"){az=aA.sender.$angular_scope;az.vc.executeEvent(au,ay,az.vc.model,ak,ax,ah)}else{az=g.element("#"+ay).scope();az.vc.executeEventInGrid(au,ay,az.vc.model,ak,al,az.vc)}}};aa=function(aA){var az=aA.sender.$angular_scope;d.map(aA.files,function(aB){if(af===true){var aC=w("translate")("DSGNR.SYS_DSGNR_MSGCONFUP_00046");if(confirm(aC+" "+aB.name+"'?")==true){ag(aA,aB,az)}else{console.warn("Cancelado por el usuario");aA.preventDefault()}}})};av=function(aA,aC){if(aj){am.set(aj,aC)}else{var az=n(am),aB=az.assign;aB(aA,aC);ap=aA}};ae=function(aB,aA){var aD=aB.files[0].name;if(aA){am=aA}var az=aB.sender.$angular_scope;if(aB.XMLHttpRequest.upload&&aB.XMLHttpRequest.upload&&p){var aC=new Date().getTime();p.keepAliveController.start(aC);aB.XMLHttpRequest.addEventListener("loadend",function(){p.keepAliveController.stop(aC)})}aB.XMLHttpRequest.addEventListener("readystatechange",function(aF){var aG=aF.target,aE;if(aG.readyState===4){if(aG.status===200){aE=JSON.parse(aG.response);g.element("#"+aq).val(aD);av(az,aD);if(aE.status&&aE.status==="OK"){ab(az);ai(10,false,null)}else{F.showTranslateMessagesError(aE.errorId);az.$apply()}}else{F.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFUP_00047");az.$apply()}}})};ad=function(){if(aj){am.set(aj,"");T.viewState[aw].column[aj].disabledUpload=false}else{N.viewState[aq].disableUpload=false;var az=n(am),aA=az.assign;aA(ap,"");ap=null}g.element("#"+aq).val("");console.log("File deleted")};an={setParameters:ai,onUpload:ae,onSelect:aa,removeFile:ad,onSuccess:Z};N.uploaders[aq].fileUploadAPI=an;return an};return{parentApi:U,viewState:Q,grid:V,navigation:R,vc:N,parentVc:N.parentVc,nextSeq:W,errors:M,ext:P,fileUpload:L}}return K}());var A={};A.CommonArgs=(function(){function K(){this.messageHandler=null;this.controlId=null;this.api=null;this.execServer=true;this.args=null;this.constants=D;this.serverParameters={}}return K}());A.ChangedGroupEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.commons.item={id:null,isOpen:true}}return K}());A.ExecuteCommandEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.commandName="";this.eventName=""}return K}());A.onTabClosingEventArgs=function(){this.commons=new A.CommonArgs();this.viewContainerId=null;this.deferred=null;this.closingReason="None"};A.CallTransactionEventArgs=(function(){function K(){this.commons=new A.CommonArgs()}return K}());A.ExecuteQueryEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.parameters=null;this.model=null;this.config=null}return K}());A.GridInitDetailTemplateArgs=(function(){function K(){this.commons=new A.CommonArgs();this.modelRow=null}return K}());A.GridInitColumnTemplateArgs=(function(){function K(){this.commons=new A.CommonArgs()}return K}());A.GridRowCommandEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.rowData=null;this.rowIndex=null;this.keys=null;this.nameEntityGrid=null;this.refresData=false}return K}());A.GridRowSelectingEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.rowData=null;this.rowIndex=null;this.nameEntityGrid=null}return K}());A.RenderGridRowEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.rowData=null;this.rowIndex=null;this.nameEntityGrid=null}return K})();A.GridExecuteCommandEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.nameEntityGrid=null}return K}());A.GridRowActionEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.rowData=null;this.cancel=false}return K}());A.GridBeforeEnterInLineRowEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.cancel=false;this.inlineWorkMode=null;this.rowData=null}return K}());A.GridAfterLeaveInLineRowEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.inlineWorkMode=null}return K}());A.ChangedEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.oldValue=null;this.newValue=null;this.focus=false}return K}());A.TextInputButtonEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.model=null;this.url=null;this.cancel=false}return K}());A.TextInputButtonGridEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.modelRow=null;this.url=null;this.cancel=false}return K}());A.TextInputButtonCloseModalEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.modalResult=null;this.vcId=null;this.model=null;this.visualAttributeIdIniCall=null}return K}());A.TextInputButtonCloseModalGridEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.modalResult=null;this.vcId=null;this.modelRow=null}return K}());A.CloseModalEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.model=null;this.parentModel=null;this.vcId=null;this.result=null;this.closedViewContainerId=null;this.dialogCloseResult=null;this.dialogCloseType=null}return K}());A.LoadCatalogEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.filters=null;this.config=null}return K}());A.ValidateTransactionEventArgs=(function(){function K(){this.commons=new A.CommonArgs()}return K}());A.ShowResultEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.messages={};this.success=false}return K}());A.BeforeOpenGridDialogEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.dialogParameters=undefined;this.cancel=false}return K}());A.AfterCloseGridDialogEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.dialogParameters=undefined;this.dialogResponse=undefined;this.customDialogResponse=undefined}return K}());A.InitDataEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.hasData=false}return K}());A.ChangeInitDataEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.hasData=false}return K}());A.RenderEventArgs=(function(){function K(){this.commons=new A.CommonArgs()}return K}());A.ExecuteCrudCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true}return K}());A.ExecuteCommandCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true}return K}());A.GridRowActionCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true}return K}());A.GridRowCommandCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true}return K}());A.GridCommandCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true}return K}());A.GridRowSelectingCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true}return K}());A.InitDataCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true}return K}());A.ChangeCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true;this.oldValue=undefined;this.newValue=undefined;this.rowData=undefined}return K}());A.CloseModalCallbackEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.success=true;this.vcId=null;this.result=null;this.closedViewContainerId=null;this.dialogCloseResult=null;this.dialogCloseType=null}return K}());A.CustomValidateEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.errorMessage=null;this.isValid=true;this.currentValue=null}return K}());A.ExportColumnsEventArgs=(function(){function K(){this.commons=new A.CommonArgs();this.exportColumnsToExcel=null}return K}());var y={findEntityById:function(N,L){var M,K;for(M in N.entities){K=N.entities[M];if(K._entityId==L){K._entityName=M;return K}}return null},findEntityNameById:function(N,L){var M,K;for(M in N.entities){K=N.entities[M];if(K._entityId==L){return M}}return null},findEntityNameByAttId:function(L,K){var N,M;for(N in L.entities){for(M in L.entities[N]){if(L.entities[N][M]==K){return N}}}return null},findAttNameByAttId:function(L,K){var M;for(M in L){if(L.hasOwnProperty(M)&&L[M]===K){return M}}return null},findAPkIdByFkId:function(M,L){var K,N;for(K=0;K<M.relations.length;K=K+1){for(N=0;N<M.relations[K].relationAttributes.length;N=N+1){if(M.relations[K].relationAttributes[N].attributeIdFk){return M.relations[K].relationAttributes[N].attributeIdPk}}}return null}};return{constants:D,enums:{hasFlag:function(L){var K;for(K=1;K<arguments.length;K=K+1){if((parseInt(L,10)&parseInt(arguments[K],10))!==0){return true}}return false}},utils:{createResource:m,focusError:l.component.focusError,uuid:q,errorCallback:H,http:{generatePrimaryKeyMap:x,generatePrimaryKeyString:u},metadata:y,focusControl:l.component.focusControl},eventArgs:A,API:B}}]);c.factory("dsgnrConfigPage",["$http","$q",function a(m,l){var k={width:"",getWidth:j};return k;function j(){var r=l.defer(),q=document.styleSheets,o=null,s,p,n;for(n=0;n<q.length;n=n+1){s=q[n].cssRules[0].href;if(g.isDefined(s)&&s!==null){p=s.length-3;o="${contextPath}/cobis/web/styles/"+s.slice(0,p)+"json";break}}if(o!==null){m.get(o).success(function(t){k.width=t;r.resolve(t)}).error(function(){r.reject("Failed to get width");b.logging.getLoggerManager().warn("No se pudo obtener la configuracin Json")})}else{b.logging.getLoggerManager().warn("No se pudo obtener el archivo JSON para configuracion")}return r.promise}}]);c.factory("myHttpInterceptor",["$q","$window","$rootScope",function(k,l,j){return{response:function(m){if(j.count&&j.count>0){j.count=j.count-1;if(j.count==0){b.showMessageWindow.loading(false)}}return m},responseError:function(m){var o,p,q,n=function(){if(j.count&&j.count>0){j.count=j.count-1;if(j.count==0){b.showMessageWindow.loading(false)}}};n();if(m.status===500){if(b.containerScope){b.container.tabs.changeCurrentTab("TLSRVERROR","${contextPath}/cobis/web/views/commons/Error500.html","MNU_INTSERROR",false)}else{if(j.flagFromCENToDesigner){e.location="${contextPath}/cobis/web/views/commons/Error500.html"}else{b.showMessageWindow.alertError(m.statusText);d("[id^=messages-alert-close-]").remove()}}}else{if(m.status===401){if(b.containerScope){if(b.containerScope.shellTabs!==undefined&&b.containerScope.shellTabs!==null){o=null;p=[];b.containerScope.shellTabs.forEach(function(r){p.push(r)});q=p.length;p.forEach(function(s,r){if(s.option!==undefined&&s.option===1){if(q===r+1){s.isFromDesigner=true}b.container.tabs.removeTabObject(s)}})}b.containerScope.lockScreen.setVisible()}else{b.showMessageWindow.alertError(m.statusText)}}}return k.reject(m)}}}]);c.config(["$httpProvider",function(j){if(g.isDefined(j.interceptors)){j.interceptors.push("myHttpInterceptor")}}])}));