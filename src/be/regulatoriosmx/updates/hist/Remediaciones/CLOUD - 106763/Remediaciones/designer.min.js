var app;(function(a,b){if(typeof define==="function"&&define.amd){define("designer",[],function(){return(b(window.angular,window.kendo,window.kendo.jQuery,window.cobis))})}else{b(window.angular,window.kendo,window.kendo.jQuery,window.cobis)}}(this,function(b,h,f,e){if(!window.designer){window.designer={}}var d=window.designer,a=600,g=true,c=null;d.dsgEvents=function(){return{initData:{},initDataCallback:{},changeInitData:{},executeCommand:{},executeLabelCommand:{},executeCommandCallback:{},executeCrudCallback:{},onTabClosing:{},validateTransaction:{},callTransaction:{},showResult:{},closeModalEvent:{},change:{},changeGroup:{},changeCallback:{},changeWithError:{},loadCatalog:{},loadCatalogCallback:{},executeQuery:{},executeQueryCallback:{},textInputButtonEvent:{},textInputButtonCloseModalEvent:{},gridRowInserting:{},gridRowInsertingCallback:{},gridRowUpdating:{},gridRowUpdatingCallback:{},gridRowDeleting:{},gridRowDeletingCallback:{},gridRowSelecting:{},gridRowSelectingCallback:{},gridRowRendering:{},showGridRowDetailIcon:{},gridRowCommand:{},gridRowCommandCallback:{},gridCommand:{},gridCommandCallback:{},gridBeforeEnterInLineRow:{},gridAfterLeaveInLineRow:{},gridInitDetailTemplate:{},gridInitColumnTemplate:{},gridInitEditColumnTemplate:{},beforeOpenGridDialog:{},afterCloseGridDialog:{},textInputButtonEventGrid:{},textInputButtonCloseModalEventGrid:{},customValidation:{},customInputRestriction:{},customValidate:{},onCloseModalEvent:{},onCloseModalEventCallback:{},exportColumns:{}}};app=b.module("designerModule");app.service("designer",["cobisMessage","dsgnrUtils","dsgnrCommons","designerCRUD","dsgnrCE","$resource","$parse","$rootScope","$location","$modal","$q","$timeout","dsgnrConfigPage","$route","$filter",function(G,bT,J,a6,aB,t,v,a7,T,aL,bn,x,bG,b1,bd){var bq=[],bO=J.constants.event,U=J.utils.focusError,ai=J.utils.focusControl,bp={},bm;function ay(){var b8=!!window.chrome&&!!window.chrome.webstore;if(b8){var b7=navigator.userAgent;var b6=b7.indexOf("Chrome");var b5=parseInt(b7.substr(b6+7,2));if(b5>61){var b4=f(".modal-body .cb-view-container");if(b4.length>0){b4.removeClass("cb-view-container");b4.addClass("cb-view-container")}}}}bp.prepareThread=function(b4){var b5=bn.defer();setTimeout(function(){b5.resolve(b4)},0);return b5.promise};bp.run=function(b5,b6,b4){b6.then(function(b7){return b4.vc.temporaryRead(b7)}).then(function(b7){return b4.vc.initData(b7,b4.vc)}).then(function(b7){return b4._initPage_CRUDExecuteQueryEntities(b7)}).then(function(b7){b4.vc.afterInitData={flag:true};return b4._initPage_InitializeTrackers(b7)}).then(function(b7){return b4._initPage_ChangeInitData(b7)}).then(function(b7){var b8=bn.defer();x(function(){b8.resolve(b7)},400);return b8.promise}).then(function(b7){return b4._initPage_ProcessRender(b7)}).then(function(b7){b4.vc.validateForm();e.showMessageWindow.loading(false);return b7}).then(function(b7){b4.vc.setWidthColumn();b4.vc.loaded=true;if(b4.vc.isModal()){ay()}return b7})};function y(b4,b6,b5){b4.commons.messageHandler=G;b4.commons.controlId=b6;b4.commons.execServer=true;b4.commons.api=new J.API(b5);b4.commons.types=b5.types;b4.commons.args=b5.args;if(e.container.tabs.getCurrentTab()!=null){b4.commons.args=e.container.tabs.getCurrentTab().guid}}function bk(b8,b5,b6,b4){var b9=this.viewState[b5].activeItem,b7;this.viewState[b5].activeItem=b6;if(b9!=b6){if(b4===true){b7=new J.eventArgs.ChangedGroupEventArgs();b7.commons.item.id=b6;y(b7,b5,this);aB.changeGroup(this.vcEvents,this.model,b7)}}}function Y(){var b4="Seleccione";if(e.userContext.getValue(e.constant.CULTURE)==="en"){b4="Select"}return b4}function bN(b4){var b5=this;b5.viewState[b4.id]={_readonly:undefined,_disabled:undefined,_visible:undefined};if(b.isDefined(b4.hasId)){b5.viewState[b4.id].statusStyle={success:false,fail:false,none:true,numErrors:undefined}}if(b4.componentStyle){b5.viewState[b4.id].style=b4.componentStyle}else{b5.viewState[b4.id].style=[]}if(b.isDefined(b4.htmlSection)){b5.viewState[b4.id].customView={};b5.viewState[b4.id].view={}}if(b.isDefined(b4.labelImageId)){b5.viewState[b4.id].labelImageId=b4.labelImageId}else{if(b.isDefined(b4.imageId)){b5.viewState[b4.id].imageId=b4.imageId}}if(b.isDefined(b4.tooltip)){b5.viewState[b4.id].tooltip=b4.tooltip}if(b4.label){b5.viewState[b4.id].label=b4.label;if(b.isDefined(b4.haslabelArgs)){b5.viewState[b4.id].labelArgs={}}}if(b.isDefined(b4.queryId)){b5.viewState[b4.id].queryId=b4.queryId}if(b.isDefined(b4.mask)){b5.viewState[b4.id].mask=b4.mask}if(b.isDefined(b4.format)){b5.viewState[b4.id].format=b4.format}if(b.isDefined(b4.prefix)){b5.viewState[b4.id].prefix=b4.prefix}if(b.isDefined(b4.suffix)){b5.viewState[b4.id].suffix=b4.suffix}if(b.isDefined(b4.decimals)){b5.viewState[b4.id].decimals=b4.decimals}if(b.isDefined(b4.validationCode)){b5.viewState[b4.id].validationCode=b4.validationCode}if(b.isDefined(b4.isComboBox)){b5.viewState[b4.id].template=""}b5.viewState[b4.id].metadata={};if(b.isDefined(b4.readOnly)){b5.viewState[b4.id].metadata.readOnly=b4.readOnly;Object.defineProperty(b5.viewState[b4.id],"readonly",{get:function(){if(b.isDefined(this._readonly)){return this._readonly}return J.enums.hasFlag(this.metadata.readOnly,b5.mode)},set:function(b6){this._readonly=b6}})}if(b.isDefined(b4.enabled)){if(b4.isAutoGenerated){Object.defineProperty(b5.viewState[b4.id],"disabled",{get:function(){if(b.isDefined(this._disabled)){return this._disabled}return true},set:function(b6){this._disabled=b6}})}else{b5.viewState[b4.id].metadata.enabled=b4.enabled;Object.defineProperty(b5.viewState[b4.id],"disabled",{get:function(){if(b.isDefined(this._disabled)){return this._disabled}return !J.enums.hasFlag(this.metadata.enabled,b5.mode)},set:function(b6){this._disabled=b6}})}}if(b.isDefined(b4.visible)){b5.viewState[b4.id].metadata.visible=b4.visible;Object.defineProperty(b5.viewState[b4.id],"visible",{get:function(){if(b.isDefined(this._visible)){return this._visible}return J.enums.hasFlag(this.metadata.visible,b5.mode)},set:function(b6){this._visible=b6}})}else{Object.defineProperty(b5.viewState[b4.id],"visible",{get:function(){if(b.isDefined(this._visible)){return this._visible}return true},set:function(b6){this._visible=b6}})}}function aS(b6){var b5=h.support.browser.msie,b4=h.support.browser.version,b7=f("#"+b6);if(b.isDefined(b7)&&b7.data("kendoExtComboBox")){if(b5&&b4>10){setTimeout(function(){b7=b7.data("kendoExtComboBox");b7.input.attr("readonly",true);if(!f(b7.input).hasClass("non-readonly")){b7.input.readOnly=true;b7.input.addClass("non-readonly")}},a)}else{b7=b7.data("kendoExtComboBox");b7.input.attr("readonly",true);if(!f(b7.input).hasClass("non-readonly")){b7.input.readOnly=true;b7.input.addClass("non-readonly")}}}}function a1(b7,b9){var b4=b.element(f("#"+b7)).data("kendoExtGrid"),b6,b5,b8,ca,cc,cb;if(b4){cb=f("#"+b9);b6=b4.dataItem(cb.closest("tr"));if(b6){b5=cb.attr("name");cc=b6[b5];b8=cb.data("kendoExtComboBox");if(b8){if(b8.selectedIndex===-1){if(b8.options.index===0&&b8.dataSource.data().length>0){b6[b5]=b8.dataSource.data()[0][b8.options.dataValueField];b8.text(b8.dataSource.data()[0][b8.options.dataTextField])}else{if(b6[b5]===""||b6[b5]===0){b8.text("");b6[b5]=null}}}else{if(cc&&!b8.defaultValue){b8.value(cc);b8.defaultValue=true}else{if(b8.dataSource.data().length>0&&typeof b8.dataSource.data()[0][b8.options.dataValueField]==="number"){b6[b5]=Number(b8.value())}else{b6[b5]=b8.value()}}}}else{ca=f("#"+b9).attr("k-cascade-from");if(ca){if(b6[b5]===""){b6[b5]=null}}}}}}function bl(b5){var b4=f("#"+b5).attr("ng-model");if(w("angular.element($('#"+b5+"')).scope()."+b4)===""){w("angular.element($('#"+b5+"')).scope()."+b4+"=null")}}function w(b4){return new Function("return "+b4)()}function by(b6,b5,b4){if(b.isDefined(b6.vc.model[b5])){return b6.vc.model[b5][b4]}else{if(b.isDefined(b6.vc.parentVc)&&b.isDefined(b6.vc.parentVc.model[b5])){return b6.vc.parentVc.model[b5][b4]}else{return null}}}function aU(){}function C(){if(sessionStorage.getItem("columnSize")!=null){e.logging.getLoggerManager().warn("ColumnSize Defined")}else{bG.getWidth().then(function(b4){if(b.isDefined(b4.queryView)&&b.isDefined(b4.queryView.editDeleteBtns)){if(b4.queryView.editDeleteBtns.width){sessionStorage.setItem("columnSize",b4.queryView.editDeleteBtns.width)}else{e.logging.getLoggerManager().warn("No value was found ColumnSize standard buttons");sessionStorage.setItem("columnSize","100px")}}},function(b4){e.logging.getLoggerManager().warn("It failed to get the configuration file");sessionStorage.setItem("columnSize","100px")})}}function bo(b4){var b5=null;if(b4){b5=b.element("#"+b4+"_gridUploader")}else{b5=b.element("#fileUploader")}b5.trigger("click")}function ap(b4){bq[this.id].uploaders[b4].fileUploadAPI.removeFile()}function bc(b5,b4,b9,ca){var b8;if(!b5){var b6=b9.sender.$angular_scope;var b7=b.element("#fileUploader").attr("visualAttributeId");b8=b6.vc.uploaders[b7].fileUploadAPI}else{b8=ca[b4].fileUploadAPI}return b8}function bP(b7,b5,b4){var b6=bc(b5,b4,b7,this.uploaders);b6.onUpload(b7,b5)}function br(b6,b5){var b4=new J.eventArgs.RenderGridRowEventArgs();y(b4,b6,this);b4.rowData=b5.rowData;b4.rowIndex=b5.rowIndex;b4.nameEntityGrid=b5.nameEntityGrid;return aB.gridRowRendering(this.vcEvents,this.model,b4)}function al(b6,b4){var b5=bc(b4,b4,b6,this.uploaders);b5.onSelect(b6)}function an(b6,b4){var b5=bc(b4,b4,b6,this.uploaders);b5.onSuccess(b6)}function a8(b7,b8,ca){var b6=f("#"+b7+" tbody"),b4=b6.find("tr[data-uid="+b8+"]").find(".k-hierarchy-cell a"),b9=b6.find("tr[data-uid="+b8+"]"),b5=f(b9).next(".k-detail-row");if(ca===false||typeof ca==="undefined"){b4.hide();if(b5){b5.remove()}}else{b4.show()}}function bs(b5){var b4=f("#"+b5);if(b.isDefined(b4)){x(function(){b.element(b4).trigger("focus");b.element(b4).trigger("click")},100)}}function X(b5,b6,b7){var b4;if(b7[b5]){for(b4 in b6){b6[b4].dsgnrId=J.utils.uuid()}}}function bh(b4){if(this.seq[b4]){this.seq[b4]=this.seq[b4]-1}else{this.seq[b4]=-1}return this.seq[b4]}function aQ(b8,b7,ca){var b6={},b4,b9;if(b7&&Object.getOwnPropertyNames(b7).length>0){for(b4 in b8){for(b9 in b7){if(b7[b9]===true){if(b9===b4){if(b8[b4] instanceof h.data.DataSource){b6[b4]=b8[b4].data()}else{b6[b4]=b8[b4]}}}}if(ca&&Object.getOwnPropertyNames(ca).length>0){for(var b5 in ca){if(ca.hasOwnProperty(b5)){if(b5===b4){b6[b4]=b8[b4]}}}}}}else{for(b4 in b8){if(b8[b4] instanceof h.data.DataSource){b6[b4]=b8[b4].data()}else{b6[b4]=b8[b4]}}}return b6}function a3(b8,b5,b7,b4){var b6=null;if(b.isDefined(b5)&&b.isDefined(b5.commons)){if(Object.keys(b5.commons.serverParameters).length>0){b6=aQ(b8,b5.commons.serverParameters,b5.parameters);b5.commons.serverParameters={}}else{b6=aQ(b8,b7)}}else{if(b4==="temporarySave"||b4==="readTemporaryData"||b4==="deleteTemporaryData"){b6=aQ(b8,b7)}else{console.log("Asignar el argumento para server parameters")}}return b6}function bW(b5,b4,b9,cd,ca,b6){var ce,cb=this.args,cc,b8,b7={};if(b.isDefined(b6)){ce=a3(b9,b6,this.serverParameters)}else{ce=a3(b9,ca,this.serverParameters,b5)}this.serverParameters={};if(ca){for(cc in this.args){if(!this.args.hasOwnProperty(cc)){continue}ca[cc]=this.args[cc]}cb=ca}if(b.isDefined(this.parentVc)&&b.isDefined(this.parentVc.customDialogParameters)){cb.customParameters=this.parentVc.customDialogParameters}cb.viewContainerId=this.id;cb.version=this.taskVersion;cb.taskId=this.taskId;for(cc in cb){if(cb.hasOwnProperty(cc)){if(cc==="commons"){if(b.isDefined(cb.commons)&&b.isDefined(cb.commons.api)){if(b.isUndefined(b7.commons)){b7.commons={}}for(ikey in cb.commons){if(ikey!=="api"){b7.commons[ikey]=cb.commons[ikey]}}}else{b7[cc]=cb[cc]}}else{b7[cc]=cb[cc]}}}b8={event:b5,source:b4,data:ce,args:b7};this.server.post(b8,cd,J.utils.errorCallback)}function Q(b5,b4,b7,b9){var cc=a3(b7,b9,null,b5),ca=this.args,cb,b6,b8;if(b9){for(cb in this.args){if(!this.args.hasOwnProperty(cb)){continue}b9[cb]=this.args[cb]}ca=b9}if(b.isDefined(this.parentVc)&&b.isDefined(this.parentVc.customDialogParameters)){ca.customParameters=this.parentVc.customDialogParameters}ca.viewContainerId=this.id;ca.version=this.taskVersion;ca.taskId=this.taskId;b6={event:b5,source:b4,data:cc,args:ca};b8=this.server.post(b6);return b8.$promise}function b2(b6,b4,ca,b9,cb,b7,b5){var cc=aQ(b9,this.serverParameters);this.serverParameters={};var b8={event:b6,source:b4,data:cc,catalog:ca,args:{viewContainerId:this.id,version:this.taskVersion,taskId:this.taskId,cache:b5}};if(b7){b8.args={config:b7,viewContainerId:this.id,version:this.taskVersion,taskId:this.taskId}}this.server.post(b8,cb,J.utils.errorCallback)}function p(b8,b4){if(b8.hasInitDataSupport){if(!b8.hasTemporaryDataSupport||(b8.hasTemporaryDataSupport&&b8.ejecTemporaryData&&!b8.hasTemporaryData)){var b7=b4,b5;var b6=new J.eventArgs.InitDataEventArgs();y(b6,b8.vcName,b7);aB.initCustomData(this.vcEvents,b4.model,b6);b5=b6.hasData;if(this.serverEvents&&b6.commons.execServer){return b7.executeService(bO.InitData,b8.vcName,b4.model,b6).then(function(b9){b8.hasInitData=b7.processResponse(b9,b6);b8.ejecInitData=b9.success;var ca=new J.eventArgs.InitDataCallbackEventArgs();y(ca,b8.vcName,b7);ca.success=b9.success;aB.initDataCallback(b7.vcEvents,b7.model,ca);return b8})}else{b8.hasInitData=b5;b8.ejecInitData=true;return b8}}else{b8.hasInitData=false;b8.ejecInitData=false;return b8}}else{b8.ejecInitData=false;b8.hasInitData=false;return b8}}function aG(b4){var b6=null,b8=this.$angular_scope.vc,cb=b4.item.id,b9=cb.lastIndexOf("_"),b7="",b5=false,ca=false;if(b9!==-1){if(cb.substring(b9)==="_tab"){cb=cb.substring(0,b9);b7=b4.contentElement.parentElement.id;if(b7.indexOf("_VAL")!==-1){b7=b7.substring(0,b7.indexOf("_VAL"))}else{if(b7.indexOf("_tab")!==-1){b7=b7.substring(0,b7.indexOf("_tab"))}}b5=true}else{b7=b4.item.parentElement.id;b7=b7.substring(0,b7.indexOf("_VAL"));if(b4.sender.options.expandMode==="single"){if(b4.item.attributes["aria-expanded"].value==="false"){ca=true}}else{ca=true}}}var cc=bb(b6);if(cc){cc.then(function(cd){var ce=new J.eventArgs.ChangedGroupEventArgs();ce.commons.item.id=cb;if(!b5){if(b4.item.attributes[5].value=="false"){ce.commons.item.isOpen=false}}ce.eventName=bO.ChangeGroup;y(ce,b7,b8);if(b5||ca){aB.changeGroup(b8.vcEvents,b8.model,ce)}})}}function bA(b7,b4){if(b7.hasChangeInitDataSupport){if(!b7.hasTemporaryDataSupport||(b7.hasTemporaryDataSupport&&b7.ejecTemporaryData&&!b7.hasTemporaryData)){var b6=b4,b8=new J.eventArgs.ChangeInitDataEventArgs(),b5;y(b8,b7.vcName,b6);aB.changeInitCustomData(this.vcEvents,b4.model,b8);b5=b8.hasData;if(this.serverEvents&&b8.commons.execServer){return b6.executeService(bO.ChangeInitData,b7.vcName,b4.model,b8).then(function(b9){b5=b6.processResponse(b9,b8);b7.hasChangeInitData=b5;b7.ejeChangeInitData=b9.success;return b7})}else{b7.hasChangeInitData=b5;b7.ejeChangeInitData=true;return b7}}else{b7.hasChangeInitData=false;b7.ejeChangeInitData=false;return b7}}else{b7.ejeChangeInitData=false;b7.hasChangeInitData=false;return b7}}function aM(cb,b5,b7,b4){var b6=bT.combobox.isAutocompleteComboBox(b5,b4),b9=b5.data("kendoExtComboBox");if(b.isDefined(b9)&&b6){var b8=b9.dataSource,ca=b8.filtersOfLastRequest;cb.value=bT.combobox.isClientFilteringRequest(ca,b7,b5);if(cb.value){if(b.isUndefined(b8.dataToBeFilterInClient)){b8.dataToBeFilterInClient=b8.data()}cb.dataToBeLoaded=bT.combobox.filterDataInClient(b9,b7)}else{b8.dataToBeFilterInClient=undefined}b8.filtersOfLastRequest=b7}}function ad(cd,b7,cc,ck,ce){var b9=this,cb=f("#"+cd),cf=bT.combobox.isCascade(cb),b4={value:false,dataToBeLoaded:[]};aM(b4,cb,cc,ck);if((cc||!cf)&&b4.value===false){var ci,ca=[],cl,b5=new J.eventArgs.LoadCatalogEventArgs(),cg;y(b5,cd,this);if(cc){if(cc.filters){for(cg in cc.filters){ca.push(cc.filters[cg].value)}b5.filters=ca}if(ck){b5.config=ck}}cl={filters:ca,config:null,cache:ce};if(ck){cl.config=ck}ci=aB.loadCustomCatalog(this.vcEvents,b5);if(this.serverEvents&&b5.commons.execServer){if(b7){var b6={},b8;if(Object.keys(b5.commons.serverParameters).length>0){b8=b5.commons.serverParameters}else{b8=this.serverParameters}if(b8&&Object.getOwnPropertyNames(b8).length>0){b6=this.model}this.execute(bO.LoadCatalog,cd,b6,function(cm){if(cm.success){L(null,true,cm.messages,false,this)}else{L(null,false,cm.messages,false,this)}b7(cm);o(b9,cd,cb);aB.loadCustomCatalogCallback(b9.vcEvents,b9.model,b5)},cl,b5)}else{this.execute(bO.LoadCatalog,cd,null,function(cm){if(cm.success){L(null,true,cm.messages,false,this)}else{L(null,false,cm.messages,false,this)}b9.catalogs[cd].data(cm.data["RESULT"+cd]);o(b9,cd,cb)},cl,b5)}}else{if(ci==null||ci instanceof Array){if(b7){var cj={data:[],success:true};cj.data["RESULT"+cd]=ci;b7(cj)}else{b9.catalogs[cd].data(ci)}}else{if(ci!=null&&b.isDefined(ci.$$state)){aC(cd,b9.catalogs[cd],ci,b7)}}}}else{if(b7){var ch={data:{},success:true};ch.data["RESULT"+cd]=b4.dataToBeLoaded;b7(ch);o(b9,cd,cb)}}}function aC(b4,b5,b6,b7){b6.then(function(b9){b9=af(b9);if(b7){var b8={data:[],success:true};b8.data["RESULT"+b4]=b9;b7(b8)}else{b5.data(b9)}},function(b8){console.error("Failed: "+b8)},function(b8){console.info("Got notification: "+b8)})}function be(b5,b9,cd,b8,b7,b4){var cc=f("#"+b5),b6={value:false,dataToBeLoaded:[]},cb=null,ca=this;if(b8){cb=b8}aM(b6,cc,b7,b8);if(ca.serverEvents&&b6.value===false){if(cd){this.executeCatalog(bO.LoadCatalogCobis,b5,b9,"",cd,cb,b4)}else{this.executeCatalog(bO.LoadCatalogCobis,b5,b9,"",function(cf){ca.catalogs[b5].data(cf.data["RESULT"+b5])},cb,b4)}}else{if(cd){if(b6.dataToBeLoaded.length>0){var ce={};ce["RESULT"+b5]=b6.dataToBeLoaded;cd({data:ce,success:true})}else{cd([])}}}}function o(b7,b8,b5){var b6=h.support.browser.msie,b4=h.support.browser.version;if(b6&&b4>10&&b.isDefined(b7.viewState[b8])){var b9=(b7.viewState[b8].disabled||b7.viewState[b8].disabledingroup);bT.component.forceEnabledAttributeForComponent(b5,!b9)}}function a9(cj,b9,ck,cf,ci,b8,b7,b4){var cc=this,ce=f("#"+cj),b6={value:false,dataToBeLoaded:[]},cb={},cd;if(typeof b9==="string"){cd=this.request.qr[b9]}else{cd=b9;b9=cd.queryPk.queryId}if(typeof cf!="boolean"&&typeof ck!="string"){ck=cf;cf=ci;ci=b8;b8=argmnts[6]}cd.updateParameters();var ch=cd.parameters,cg=null,b5=new J.eventArgs.ExecuteQueryEventArgs();y(b5,b9,this);if(b8){cg={config:b8,cache:b4,controlId:cj};b5.config=b8}b5.parameters=ch;aM(b6,ce,b7,b8);cb=aB.executeCustomQuery(this.vcEvents,b5);cb=af(cb);if(this.serverEvents&&b5.commons.execServer&&b6.value===false){if(cg==null){cg={cache:b4,controlId:cj}}if(ci){this.execute(bO.ExecuteQuery,b9,ch,function(cl){if(cl.success){L(null,true,cl.messages,false,this)}else{L(null,false,cl.messages,false,this)}cb=af(cl.data["RESULT"+b9]);ci(cl);o(cc,cj,ce);aB.executeCustomQueryCallback(cc.vcEvents,cc.model,b5)},cg,b5)}else{this.execute(bO.ExecuteQuery,b9,ch,function(cl){cc.processExecuteQueryResponse(cl,b9,ck,cf,true)},cg,b5)}}else{if(cb==null||cb instanceof Array){var ca={data:[],success:true};ca.data["RESULT"+b9]=cb;if(b6.dataToBeLoaded.length>0){ca.data["RESULT"+b9]=b6.dataToBeLoaded}if(ci){ci(ca)}else{cc.processExecuteQueryResponse(ca,b9,ck,cf,false)}}else{if(cb!=null&&b.isDefined(cb.$$state)){aC(b9,cc.queries[b9],cb,ci)}}}}function bB(b5,b7,b4,cd,ca,cc,b8){var ce,b9=this,b6;if(typeof b5!=="string"){b5=b5.queryPk.queryId}var cb=function(cf){if(b.isDefined(cf.queries[b5])){cf.queries[b5].read({refresh:true}).then(function(){if(b.isDefined(cf.queries[b5].data())&&cf.queries[b5].data().length>0){cf.queries[b5].page(1)}})}};if(b.isDefined(cd)&&cd===true){ce=bb(b6);if(ce){ce.then(function(){return au(b9,b5,b4,cd,ca,cc)}).then(function(cf){if(cf.success){cb(b9)}})}}else{cb(b9)}}function bK(b6,b5){var b4;if(b.isDefined(b5)){f("#"+b5).find("[kendo-ext-grid^='grids']").addBack().each(function(b8,b7){f(b7).data("kendoExtGrid").cancelRow()})}if(typeof b6!=="string"){b6=b6.queryPk.queryId}if(b.isDefined(this.queries[b6])){this.queries[b6].read({refresh:true,appendRecords:true})}}function ao(b6,b5,cc,cb,b7){var b4,ca,b9;if(b6){if(cb){for(b9 in this.metadata.entities){b4=this.metadata.entities[b9];if(b4._entityId==cc){ca=this.model[b9];if(this.model[b9] instanceof h.data.DataSource){if(b6.data["RESULT"+b5]){this.model[b9].data(af(b6.data["RESULT"+b5]));this.model[b9].sync()}}else{if(b6.data["RESULT"+b5]){var b8=b6.data["RESULT"+b5];this.model[b9]=b8[0]}}}}}else{if(this.queries[b5] instanceof h.data.DataSource&&b6.data["RESULT"+b5]){this.queries[b5].data(b6.data["RESULT"+b5])}}this.mode=J.constants.mode.Update;if(b6.success){L(null,true,b6.messages,false,this)}else{L(null,false,b6.messages,false,this)}}}function aj(b7,b4){var b5=this,b6=new J.eventArgs.GridRowSelectingEventArgs();y(b6,b7,this);b6.rowData=b4.rowData;b6.rowIndex=b4.rowIndex;b6.nameEntityGrid=b4.nameEntityGrid;aB.gridRowSelecting(this.vcEvents,this.model,b6);if(this.serverEvents&&b6.commons.execServer){this.execute(bO.GridRowSelecting,b7,this.model,function(b9){b5.processResponse(b9,b6);var b8=new J.eventArgs.GridRowSelectingCallbackEventArgs();y(b8,b7,b5);b8.success=b9.success;b8.rowData=b4.rowData;b8.rowIndex=b4.rowIndex;b8.nameEntityGrid=b4.nameEntityGrid;aB.gridRowSelectingCallback(b5.vcEvents,b5.model,b8)},b4,b6)}}function aN(b6,b4){var b5=new J.eventArgs.GridRowSelectingEventArgs();y(b5,b6,this);b5.rowData=b4.rowData;b5.rowIndex=b4.rowIndex;b5.nameEntityGrid=b4.nameEntityGrid;return aB.showGridRowDetailIcon(this.vcEvents,this.model,b5)}function s(b6,b5){var b4=new J.eventArgs.GridInitDetailTemplateArgs();y(b4,b6,this);b4.modelRow=b5.modelRow;aB.gridInitDetailTemplate(this.vcEvents,this.model,b4)}function H(b5,b6,b7){var b4=new J.eventArgs.GridInitColumnTemplateArgs();y(b4,b5,this);b4.parameters={};b4.parameters.templateBase=b7;return aB.gridInitColumnTemplate(this.vcEvents,b5,b6,b4)}function bI(b5,b6,b7){var b4=aB.gridInitEditColumnTemplate(this.vcEvents,b5,b6);if(b.isUndefined(b4)){return b7}return b4}function aI(b5,b9,b8){var b7,b4,ca,b6;ca="#"+b5+" .k-grid-header";b7=f(ca);if(b.isDefined(b7)){ca="#"+b5+" .k-grid-content";b4=f(ca);if(b.isDefined(b4)){b6=b7.find("colgroup col");if(b.isDefined(b6)&&b.isDefined(b6[b9])){b6=b4.find("colgroup col");b6[b9].style.width=b8}}}}function az(b7,b4){var b5=this,b6=new J.eventArgs.GridRowCommandEventArgs();y(b6,b7,this);b6.rowData=b4.rowData;b6.rowIndex=b4.rowIndex;b6.key=null;b6.nameEntityGrid=b4.nameEntityGrid;b6.refreshData=b4.refreshData;b6.stopPropagation=b4.stopPropagation;aB.gridRowCommand(b5.vcEvents,b5.model,b6).done(function(){b4.refreshData=b6.refreshData;b4.stopPropagation=b6.stopPropagation;if(b.isDefined(b4.commandName)&&b4.commandName==="DSG_UPLOAD_FILE_"){b6.commons.api.fileUpload=b6.commons.api.fileUpload(b7,b6,null,null,bO.ExecuteGridRowCommand,b4,b6.commons.execServer);b6.commons.execServer=false}if(b5.serverEvents&&b6.commons.execServer){b3(bO.ExecuteGridRowCommand,b7,b5.model,b6,b4,b5)}})}function bg(b7,b4){var b5=this;var b6=new J.eventArgs.GridExecuteCommandEventArgs();y(b6,b7,this);b6.nameEntityGrid=b4;return aB.gridCommand(b5.vcEvents,b5.model,b6).done(function(){if(b5.serverEvents&&b6.commons.execServer){var b8={nameEntityGrid:b4};b5.execute(bO.ExecuteGridCommand,b7,b5.model,function(b9){b5.processResponse(b9,b6);var ca=new J.eventArgs.GridCommandCallbackEventArgs();y(ca,b7,b5);ca.success=b9.success;aB.gridCommandCallback(b5.vcEvents,b5.model,ca)},b8,b6)}})}function F(cb,b5,b6,ca){var b7=this,b4=null,b9=new J.eventArgs.GridRowActionEventArgs();y(b9,cb,this);var b8=bb(b4);if(b8){b8.then(function(cc){b9.rowData=b6.rowData;b9.nameEntityGrid=b6.nameEntityGrid;if(b5==J.constants.event.GridRowInserting){return aB.gridRowInserting(b7.vcEvents,b7.model,b9)}else{if(b5==J.constants.event.GridRowUpdating){return aB.gridRowUpdating(b7.vcEvents,b7.model,b9)}else{if(b5==J.constants.event.GridRowDeleting){return aB.gridRowDeleting(b7.vcEvents,b7.model,b9)}}}}).then(function(){b6.rowData=b9.rowData;b6.cancel=b9.cancel;if(b7.serverEvents&&b9.commons.execServer){b7.execute(b5,cb,b7.model,function(cc){b7.processResponse(cc,b9);b6.rowData=cc.args.rowData;b6.cancel=cc.args.cancel;b6.messages=cc.messages;b6.success=cc.success;ca();var cd=new J.eventArgs.GridRowActionCallbackEventArgs();y(cd,cb,b7);cd.success=cc.success;cd.rowData=b6.rowData;cd.success=b6.success;cd.cancel=b6.cancel;cd.messages=b6.messages;if(b5==J.constants.event.GridRowInserting){aB.gridRowInsertingCallback(b7.vcEvents,b7.model,cd)}else{if(b5==J.constants.event.GridRowUpdating){aB.gridRowUpdatingCallback(b7.vcEvents,b7.model,cd)}else{if(b5==J.constants.event.GridRowDeleting){aB.gridRowDeletingCallback(b7.vcEvents,b7.model,cd)}}}},b6,b9)}else{ca()}})}}function aX(b8,b5,b7){var b4=new J.eventArgs.GridBeforeEnterInLineRowEventArgs();y(b4,b8,this);b4.inlineWorkMode=b5.inlineWorkMode;b4.nameEntityGrid=b5.nameEntityGrid;b4.rowData=b5.rowData;aB.gridBeforeEnterInLineRow(this.vcEvents,this.model,b4);b5.cancel=b4.cancel;var b6={gridInlineWorkMode:b5.inlineWorkMode,rowData:b5.rowData};if(this.serverEvents&&b4.commons.execServer){this.execute(bO.GridBeforeEnterInLineRow,b8,this.model,function(b9){if(b9.args!=null){for(var ca in b9.args.rowData){if(ca!=="uid"&&ca!=="dirty"&&ca.substring(0,4)!=="org_"){b5.rowData.set(ca,b9.args.rowData[ca])}}}b5.cancel=b9.args.cancel;L(null,true,b9.messages,false,this);b7()},b6,b4)}else{b7()}}function ar(b7,b4){var b6=this;var b5=new J.eventArgs.GridAfterLeaveInLineRowEventArgs();y(b5,b7,this);b5.inlineWorkMode=b4.inlineWorkMode;b5.nameEntityGrid=b4.nameEntityGrid;aB.gridAfterLeaveInLineRow(this.vcEvents,this.model,b5);b4.cancel=b5.cancel;if(this.serverEvents&&b5.commons.execServer){this.execute(bO.GridAfterLeaveInLineRow,b7,this.model,function(b8){b6.processResponse(b8,b5)},b5)}}function N(b5){var b4=new J.eventArgs.RenderEventArgs();y(b4,b5,this);aB.render(this.vcEvents,this.model,b4)}function aO(b7,b9,b8,b6){if(b8){this.focusValue=b8[b6]}else{var b5=f("#"+b9).attr("ng-model");var b4=v(b5.substring(3));this.focusValue=b4(this)}}function bD(b8,ca,b5,b9){var b7=this;var b6=new J.eventArgs.ChangedEventArgs();y(b6,b8,this);b6.newValue=ca;b6.oldValue=b5;b6.isValid=b9;aB.change(this.vcEvents,this.model,b6);if(this.serverEvents&&b6.commons.execServer){var b4={newValue:b6.newValue,oldValue:b6.oldValue};this.execute(bO.Change,b8,this.model,function(cc){b7.processResponse(cc,b6);var cb=new J.eventArgs.ChangeCallbackEventArgs();y(cb,b8,b7);cb.success=cc.success;cb.oldValue=b5;cb.newValue=ca;aB.changeCallback(b7.vcEvents,b7.model,cb);if(cc.data.focus){ai(b8)}},b4,b6)}else{if(b6.focus){ai(b8)}}}function aw(b5,ch,b8,ce,ca){var cb=this,b6;var cc=new J.eventArgs.ChangedEventArgs();y(cc,ch.replace(/-.*/,""),this);if(b5){if(b8){b6=b8[ce]}else{b6=v(f("#"+ch).attr("ng-model").substring(3))(this)}var b4=f("#validator").data("kendoValidator");var cg=false;if(b.isDefined(b4)&&b4!==null&&b4.validateInput(f("#"+ch))){cg=true}if(!cg&&!cb.vcEvents.changeWithError[ch]&&!cb.vcEvents.changeWithError.allGrid){return}if(b5.sender&&b5.sender.selectedIndex==-1){return}if((bq[this.idUid].focusValue!==b6)||cb.vcEvents.changeWithError[ch]||cb.vcEvents.changeWithError.allGrid){cc.oldValue=bq[this.idUid].focusValue;cc.newValue=b6;cc.isValid=cg;if(b8){cc.rowData=b8}aB.change(this.vcEvents,this.model,cc);var cd={oldValue:cc.oldValue,newValue:cc.newValue,rowData:cc.rowData};if(this.serverEvents&&cc.commons.execServer){this.execute(bO.Change,ch.replace(/-.*/,""),this.model,function(cj){cb.processResponse(cj,cc);if(cj.args!=null){for(var ck in cj.args.rowData){if(ck!=="uid"&&ck!=="dirty"&&ck.substring(0,4)!=="org_"){b8.set(ck,cj.args.rowData[ck])}}}var ci=new J.eventArgs.ChangeCallbackEventArgs();y(ci,ch,cb);ci.success=cj.success;ci.oldValue=cc.oldValue;ci.newValue=cj.args.rowData;ci.rowData=b8;aB.changeCallback(cb.vcEvents,cb.model,ci);if(cj.data.focus){ai(ch)}},cd,cc)}else{if(cc.focus){ai(ch)}}}}else{if(f(ca).attr("ng-true-value")){cc.oldValue=(b8)?b8[ce]:v(f("#"+ch).attr("ng-model").substring(3))(this);var cf=f(ca).attr("ng-true-value");var b9=f(ca).attr("ng-false-value");cc.newValue=(ca.checked)?cf:b9}else{cc.newValue=ca.checked;cc.oldValue=!cc.newValue}if(b8){cc.rowData=b8}aB.change(this.vcEvents,this.model,cc);var b7={oldValue:cc.oldValue,newValue:cc.newValue,rowData:cc.rowData,model:this.model};if(this.serverEvents&&cc.commons.execServer){this.execute(bO.Change,ch,b7,function(cj){cb.processResponse(cj,cc);if(cj.args!=null){for(var ck in cj.args.rowData){if(ck!=="uid"&&ck!=="dirty"&&ck.substring(0,4)!=="org_"){b8.set(ck,cj.args.rowData[ck])}}}var ci=new J.eventArgs.ChangeCallbackEventArgs();y(ci,ch,cb);ci.success=cj.success;ci.oldValue=cc.oldValue;ci.newValue=cj.args.rowData;ci.rowData=b8;aB.changeCallback(cb.vcEvents,cb.model,ci);if(cj.data.focus){ai(ch)}},cc)}else{if(cc.focus){ai(ch)}}}}function au(b6,cd,b4,cc,b8,cb){var b7=b6;var ca=false;var b5={success:false};if(cc&&b4){b7.submitted[b4.element.attr("id")]=true;I();if(!b4.validate()){if(U(b4)){return ca}}}if(cc&&b8){var b9=new J.eventArgs.ValidateTransactionEventArgs();y(b9,cb,b7);ca=aB.validateCustomTransaction(b7.vcEvents,b7.model,b9);if(b7.serverEvents&&b9.commons.execServer){return b7.executeService(bO.ValidateTransaction,cb,b7.model).then(function(ce){if(ce.success&&b.isDefined(ce.data.validate)&&ce.data.validate){b5.success=true}else{L(null,false,ce.messages,false,this);b5.success=false}return b5})}else{b5.success=ca;return b5}}else{b5.success=true;return b5}}function bb(b4){var b5=bn.defer();setTimeout(function(){b5.resolve(b4)},0);return b5.promise}function a0(b8,b9,b5,b4,b6,b7){b7.execute(b8,b9,b5,function(ca){b7.processResponse(ca,b4);var cb=new J.eventArgs.ExecuteCommandCallbackEventArgs();y(cb,b9,b7);cb.success=ca.success;aB.executeCommandCallback(b7.vcEvents,b5,cb);if(ca.success){b7.closeViewContainer(b6)}},b4)}function b3(b8,b9,b6,b4,b5,b7){b7.execute(b8,b9,b6,function(cb){b7.processResponse(cb,b4);var ca=new J.eventArgs.GridRowCommandCallbackEventArgs();y(ca,b9,b7);ca.rowData=b5.rowData;ca.rowIndex=b5.rowIndex;ca.nameEntityGrid=b5.nameEntityGrid;ca.success=cb.success;aB.gridRowCommandCallback(b7.vcEvents,b7.model,ca)},b5,b4)}function bC(ce,b6,b4,cd,b9,cc,b7){var b5=null,b8=this,cb=null,cf=bb(b5),ca=null;console.log("_execCommand for "+ce);if(!cd&&b7&&this.parentVc){this.closeViewContainer(b7,true);return}cb=new J.eventArgs.ExecuteCommandEventArgs();y(cb,ce,b8);cb.eventName=bO.ExecuteCommand;cb.commandName=b6;if(cf){cf.then(function(){if(cd===true||b9===true){ca=au(b8,ce,b4,cd,b9,cc);if(ca.success===true){return aB.executeCustomCommand(b8.vcEvents,b8.model,cb)}else{return ca}}else{return aB.executeCustomCommand(b8.vcEvents,b8.model,cb)}}).then(function(cg){if(b6==="DSG_UPLOAD_FILE_"){if(b.isUndefined(b8.vcEvents.executeCommand[ce])){cb.commons.execServer=false;cb.commons.api.fileUpload=cb.commons.api.fileUpload(ce,cb,b7,b8,bO.ExecuteCommand,null,cb.commons.execServer)}else{cb.commons.api.fileUpload=cb.commons.api.fileUpload(ce,cb,b7,b8,bO.ExecuteCommand,null,cb.commons.execServer)}}if(b8.serverEvents&&cb.commons.execServer&&cg){a0(bO.ExecuteCommand,ce,b8.model,cb,b7,b8)}else{b8.closeViewContainer(b7)}})}}function am(b7,b5){var b4=null;var b6=this;console.log("_execLabelCommand for "+b7);var b8=bb(b4);if(b8){b8.then(function(b9){var ca=new J.eventArgs.ExecuteCommandEventArgs();y(ca,b7,b6);ca.eventName=bO.ExecuteLabelCommand;ca.commandName=b5;aB.executeCustomCommand(b6.vcEvents,b6.model,ca)})}}function ag(b5){var b4=new J.eventArgs.TextInputButtonEventArgs();y(b4,b5,this);b4.model=this.model;aB.textInputButtonEvent(this.vcEvents,this,b4)}function P(b5,b6){var b4=new J.eventArgs.TextInputButtonGridEventArgs();y(b4,b5,this);b4.modelRow=b6;aB.textInputButtonEventGrid(this.vcEvents,this,b4)}function S(b6,b7,b5){var b4=new J.eventArgs.TextInputButtonCloseModalEventArgs();y(b4,b6,this);b4.model=this.model;b4.vcId=b7;b4.modalResult=b5;aB.textInputButtonCloseModalEvent(this.vcEvents,b4);b4=new J.eventArgs.CloseModalEventArgs();y(b4,b6,this);b4.vcId=b7;b4.model=this.model;b4.result=b5;aB.closeModalEvent(this.vcEvents,b4)}function aR(cb,cd,b6,b9){var b8=f("#"+cb),b4=b8.data("kendoGrid");if(b4){b5=new J.eventArgs.CloseModalEventArgs();y(b5,cb,this);b5.vcId=cd;b5.model=b6;b5.result=b9;var cc=b5.commons.api.grid,ca;if(this.dialogParameters&&this.dialogParameters.isModal){ca=this.dialogParameters.rowIndex;this.dialogParameters.isModal=false}else{ca=b4.dataSource.indexOf(b6)}var b7=(b8.attr("k-data-source")).substring(9);if(b.isDefined(b9.model)){if(ca===-1){cc.addRow(b7,b9.model[b7])}else{cc.updateRow(b7,ca,b9.model[b7])}}aB.closeModalEvent(this.vcEvents,b5)}else{var b5=new J.eventArgs.TextInputButtonCloseModalEventArgs();y(b5,cb,this);b5.modelRow=b6;b5.vcId=cd;b5.modalResult=b9;aB.textInputButtonCloseModalEventGrid(this.vcEvents,b5)}}function ax(b4){if(b.isDefined(this.parentVc)){var b5=this.parentVc.modalInstances;if(b.isDefined(b5)&&b.isDefined(b5[this.id])){this.closeDialog();if(b4.dialogCloseResult===undefined){b4.dialogCloseType=J.constants.dialogCloseType.Interactive}b5[this.id].close(b4)}else{if(b.isDefined(this.autoSyncNavigation)&&(this.autoSyncNavigation===false)){this.accept(null,null,false,this.id)}}}}function bY(ca){var b7=this;var b9=ca.controlId,b8=ca.viewContainerId,cb=ca.modelRow,b6=ca.resultModal,b5=ca.callFromGrid;var b4=new J.eventArgs.CloseModalEventArgs();y(b4,b9,this);b4.vcId=this.id;b4.closedViewContainerId=b8;b4.dialogCloseResult=b6.dialogCloseResult;b4.dialogCloseType=b6.dialogCloseType;b4.result=b6;if(this.hasOnCloseModalEvent){aB.onCloseModalEvent(this.vcEvents,this.model,b4);if(b7.serverEvents&&b4.commons.execServer){b7.execute(bO.OnCloseModalEvent,b4.vcId,b7.model,function(cc){b7.processResponse(cc,b4);var cd=new J.eventArgs.CloseModalCallbackEventArgs();y(cd,b9,b7);cd.success=cc.success;cd.vcId=b7.id;cd.closedViewContainerId=b8;cd.dialogCloseResult=b6.dialogCloseResult;cd.dialogCloseType=b6.dialogCloseType;cd.result=b6;aB.onCloseModalEventCallback(b7.vcEvents,b7.model,cd);if(b6.dialogCloseResult!==J.constants.dialogCloseResult.Cancel){if(b5){b7.afterCloseModalGrid(b9,b8,cb,b6)}else{b7.afterCloseModal(b9,b8,b6)}}},b4)}else{if(b6.dialogCloseResult!==J.constants.dialogCloseResult.Cancel){if(b5){b7.afterCloseModalGrid(b9,b8,cb,b6)}else{b7.afterCloseModal(b9,b8,b6)}}}}else{if(b6.dialogCloseResult!==J.constants.dialogCloseResult.Cancel){if(b5){b7.afterCloseModalGrid(b9,b8,cb,b6)}else{b7.afterCloseModal(b9,b8,b6)}}}}function bU(b4){var b6=f(b4).closest("tr"),b7=f("td",b6).index(b4),b5=b6.find("td")[b7].className;return(b5.indexOf("btn-toolbar")>-1)}function r(b4){if(b.isDefined(b4)){return typeof b4.$close==="function"}else{if(b.isDefined(this.parentVc)&&b.isDefined(this.parentVc.modalInstances)&&b.isDefined(this.parentVc.modalInstances[this.id])){return true}}return false}function j(b4){if(b.isDefined(b4)){if(r(b4)){return false}else{if(b4.isDesignerDetail===true){return true}}}return false}function aV(b5,b9,b7,b8){var b4=null;var b6=this;var ca=bb(b4);if(ca){ca.then(function(){return au(b6,"",b5,true,b7,b8)}).then(function(cb){if(cb.success){b6.beforeCloseGridDialog(J.constants.dialogCloseResult.Accept,J.constants.dialogCloseType.Interactive);b6.closeViewContainer(true)}})}}function i(b4,b5){this.beforeCloseGridDialog(J.constants.dialogCloseResult.Cancel,J.constants.dialogCloseType.Interactive);this.closeViewContainer(true,true)}function ae(b4){if(b4!=null&&b4.length>0&&b4[0]["id"]){for(var b5=0;b5<b4.length;b5++){b4[b5]["id_"]=b4[b5]["id"];delete b4[b5]["id"]}}}function bZ(b6,b5){var b4=false;for(var b8 in b6.data){if(this.model[b8]){if(this.model[b8] instanceof h.data.DataSource){if(b6.data[b8].length>0){n(b8,b6.data[b8],b5,this.model[b8]);b4=true}}else{if(this.model[b8] instanceof h.data.ObservableArray){this.model[b8].splice(0,this.model[b8].length);if(b6.data[b8].length>0){for(var b7 in b6.data[b8]){this.model[b8].push(b6.data[b8][b7]);b4=true}}}else{this.model[b8]=b6.data[b8];b4=true}}}}if(b6.success){L(null,true,b6.messages,false,this)}else{L(null,false,b6.messages,false,this)}return b4}function af(b4){if(b.isDefined(b4)&&b4!==null&&b.isArray(b4)){return b4.map(function(b5){b5.dsgnrId=J.utils.uuid();delete b5._new;delete b5._updated;delete b5._removed;return b5})}return b4}function n(b8,ca,b4,b5){if(ca[0]._reset===true){ca=aE(ca);b5.data(ca);b5.sync()}else{var b7=b4.commons.api.grid;for(var b6=0;b6<ca.length;b6++){var b9=ca[b6];if(b9._new){delete b9._new;delete b9._updated;delete b9._removed;b7.addRow(b8,b9)}else{if(b9._updated){delete b9._new;delete b9._updated;delete b9._removed;b7.updateRowByDsgnrId(b8,b9)}else{if(b9._removed){delete b9._new;delete b9._updated;delete b9._removed;b7.removeRowByDsgnrId(b8,b9)}else{if(b9._reset){b7.removeAllRows(b8)}}}}}}}function aE(b4){b4.splice(0,1);return af(b4)}function Z(b6){var b5=false;var b4,b9;if(b6.success){b4=b6.data.model;b9=b6.data.trackers;for(var b8 in b4){if(this.model[b8]){if(this.model[b8] instanceof h.data.DataSource){if(b4[b8].length>0){b5=true;ae(b4[b8]);X(b8,b4[b8],this.trackers);this.model[b8].data(b4[b8]);this.model[b8].sync()}}else{if(this.model[b8] instanceof h.data.ObservableArray){this.model[b8].splice(0,this.model[b8].length);if(b4[b8].length>0){b5=true;for(var b7 in b4[b8]){this.model[b8].push(b4[b8][b7])}}}else{b5=true;this.model[b8]=b4[b8]}}if(b9!=null&&!f.isEmptyObject(b9)){this.trackers[b8]=new a6.DataSourceTracker(b9[b8].metadata,b9[b8].created,b9[b8].updated,b9[b8].removed)}}}L(null,true,b6.messages,false,this)}else{L(null,false,b6.messages,false,this)}return b5}function bj(b7){var b5=b7.sender.element.context.getAttribute("ng-model");var b4=v(b5.substring(3));var b8=b4.assign;b8(this,b7.sender.value());var b6=this;f("input[relatedVisualAttribute='"+b7.sender.element.context.id+"']").each(function(b9,cb){console.log(cb.getAttribute("ng-model"));var cc=v(cb.getAttribute("ng-model").substring(3));var ca=cc.assign;ca(b6,null);b6.loadDependentCatalog(cb.id)})}function E(){var b4=this;if(b4.serverEvents){f("input[relatedvisualattribute]").each(function(b5,b6){b4.loadDependentCatalog(b6.id)})}}function b0(b5){var b4=this;this.execute("loadCatalog",b5,this.model,function(b6){b4.catalogs[b5].data(b6.data["RESULT"+b5])})}function B(b5,b8){this.dialogParameters=b8;this.dialogParameters.controlId=b5;var b6=new J.eventArgs.BeforeOpenGridDialogEventArgs();y(b6,b5,this);b6.dialogParameters=b8;aB.beforeOpenGridDialog(this.vcEvents,this.model,b6);if(b8.isModal){if(!b6.cancel){var b4=(f("#"+b5).attr("k-data-source")).substring(9);var b7=b6.commons.api.navigation;b7.address={moduleId:b8.moduleId,subModuleId:b8.subModuleId,taskId:b8.taskId,taskVersion:b8.taskVersion,viewContainerId:b8.viewContainerId};b7.modalProperties={callFromGrid:true};b7.queryParameters={mode:b8.rowIndex>=0?2:1};b7.customDialogParameters={rowIndex:b8.rowIndex,currentRow:b8.rowIndex>=0?b8.rowData:null,entity:b8.rowIndex>=0?b4:null};if(b.isDefined(b8.title)){b7.label=b8.title}if(b.isDefined(b8.size)){b7.modalProperties.size=b8.size}if(b.isDefined(b8.height)){b7.modalProperties.height=b8.height}b7.openModalWindow(this.dialogParameters.controlId,b8.rowData)}}else{if(b8.hasBeforeOpenDialogEvent){return b6.commons.api.navigation.dispatched}}return false}function aF(){var b4=this.parentVc.dialogParameters,cg,b7,cb,b6;if(b.isDefined(b4)){cg=b4.nameEntityGrid;b7=b4.rowData;cb=b4.isNew;if(b.isDefined(cg)){b6=this.parentVc.trackers[cg]}}if(cb===true){this.mode=J.constants.mode.Insert;this.args.mode=J.constants.mode.Insert}else{if(cb===false){this.mode=J.constants.mode.Update;this.args.mode=J.constants.mode.Update}}if(b.isDefined(cg)&&b.isDefined(this.model[cg])){for(var ce in b7){if(!b7.hasOwnProperty(ce)){continue}if(ce.substring(0,1)=="$"){var b8=ce.substring(1);if(this.model[b8] instanceof h.data.DataSource){if(b7[ce] instanceof h.data.ObservableArray||b7[ce] instanceof Array){this.model[b8].data(b7[ce])}else{this.model[b8].data([b7[ce]])}this.model[b8].sync()}else{this.model[b8]=b7[ce]}}else{if(typeof(this.model[b4.nameEntityGrid][ce])!=="undefined"){var cd=b4.rowData.get(ce);if(typeof(b4.rowData.get(ce))==="function"){cd=b4.rowData.get(ce)();this.model[b4.nameEntityGrid][ce]=cd}else{this.model[b4.nameEntityGrid][ce]=cd}}}}var b5=this.metadata.entities[cg];var cc=b5._pks;var cf={};cf[cg]=[];for(var b9 in cc){cf[cg][b9]=b7.get(cc[b9])}this.pk=J.utils.http.generatePrimaryKeyString(cf);this.args.pk=this.pk}if(b.isDefined(b6)&&cb===false){var ca=b6.getTrackers(b7.trackId);for(var ce in ca){if(!ca.hasOwnProperty(ce)){continue}this.trackers[ce]=ca[ce]}}}function bM(b5,b6){var b4={dialogCloseResult:b5,dialogCloseType:b6};if((b5===J.constants.dialogCloseResult.Accept)&&(b.isDefined(this.autoSyncNavigation)&&this.autoSyncNavigation===true)){b4.model=this.model;b4.trackers=this.trackers}this.parentVc.dialogResponse=b4}function bw(){var b7=this.dialogParameters.controlId,b6=this.id,b5=this.customDialogResponse,b4=new J.eventArgs.CloseModalEventArgs();y(b4,b7,this);b4.vcId=this.id;b4.closedViewContainerId=b6;b4.dialogCloseResult=b5;b4.dialogCloseType=0;b4.rowData=this.dialogParameters.rowData;b4.isNew=this.dialogParameters.isNew;b4.result=b5;if(this.hasOnCloseModalEvent){aB.onCloseModalEvent(this.vcEvents,this.model,b4)}}function bH(){if(this.dialogParameters.hasAfterCloseDialogEvent){var b9=new J.eventArgs.AfterCloseGridDialogEventArgs();y(b9,this.dialogParameters.controlId,this);b9.dialogParameters=this.dialogParameters;b9.dialogResponse=this.dialogResponse;b9.customDialogResponse=this.customDialogResponse;aB.afterCloseGridDialog(this.vcEvents,this.model,b9)}if(this.dialogResponse&&this.dialogResponse.model&&this.dialogParameters.nameEntityGrid){var cc=this.dialogParameters.nameEntityGrid;var b6=this.dialogParameters.rowData;var ca=this.dialogParameters.isNew;var b8=this.dialogResponse.model[cc];var b4=this.model[cc];for(var cb in this.dialogResponse.model){if(!this.dialogResponse.model.hasOwnProperty(cb)||cb==cc){continue}var b7="$"+cb;if(this.dialogResponse.model[cb] instanceof h.data.DataSource){b8[b7]=this.dialogResponse.model[cb].data()}else{b8[b7]=this.dialogResponse.model[cb]}}if(ca){b6=b4.add(b8)}else{b6=b4.getByUid(b6.uid);for(var cb in b8){if(!b8.hasOwnProperty(cb)){continue}b6.set(cb,b8[cb])}}b4.sync();if(this.dialogResponse.trackers){var b5=this.trackers[cc];if(b5){for(var cb in this.dialogResponse.trackers){if(!this.dialogResponse.trackers.hasOwnProperty(cb)){continue}if(this.dialogResponse.trackers[cb].isDirty()){b5.addTracker(b6.trackId,cb,this.dialogResponse.trackers[cb])}}}}b6.set("_loaded",true)}delete this.dialogParameter;delete this.dialogResponse;delete this.customDialogResponse}function R(b5,b4){var b6=b5;if(!b.isDefined(b5)){b6=this.id}delete bq[b6];if(b.isDefined(b4)){if(b4){aa(b6)}}else{aa(b6)}}function aa(b4){if(b.isDefined(b1.routes["/"+b4])){delete b1.routes["/"+b4]}if(b.isDefined(b1.routes["/"+b4+"/"])){delete b1.routes["/"+b4+"/"]}}function M(b4,b5){if(b.isUndefined(b5)){b5=false}if(b.isDefined(this.parentVc)&&b4===true){delete bq[this.id];if(!this.childVc){aa(this.id)}if(this.isModal()&&b.isDefined(this.parentVc.modalInstances)&&b.isDefined(this.parentVc.modalInstances[this.id])){if(b5===true){this.parentVc.modalInstances[this.id].dismiss({dialogCloseResult:J.constants.dialogCloseResult.Cancel,dialogCloseType:J.constants.dialogCloseType.Interactive})}else{if(this.parentVc.openPageDesigner&&this.parentVc.dialogResponse){this.parentVc.modalInstances[this.id].close(this.parentVc.dialogResponse);this.parentVc.openPageDesigner=false}else{if(this.parentVc.customDialogResponse){this.parentVc.modalInstances[this.id].close(this.parentVc.customDialogResponse)}else{if(this.parentVc.dialogResponse){this.parentVc.modalInstances[this.id].close(this.parentVc.dialogResponse)}}}}}else{T.url(this.parentVc.id)}}}function aT(b4){if(b4){if(!a7.vcParent){a7.vcParent={}}if(b4!==this.id){if(b.isDefined(this.idUid)&&this.id!=this.idUid){a7.vcParent[b4]=this.idUid}else{a7.vcParent[b4]=this.id}}}}function bz(b4){if(b4){if(a7.vcParent){if(b4!==this.id){delete a7.vcParent[b4];delete bq[b4]}}}}function bL(b4){if(!a7.vcParent){a7.vcParent={}}if(b4){return bq[a7.vcParent[b4]]}return bq[a7.vcParent[this.id]]}function aA(b6,b5,b7){this.addChildVc(b6);var b4={queryParameters:b5,vcParent:{customDialogParameters:this.customDialogParameters,args:this.args,dialogParameters:this.dialogParameters,model:this.model,childVc:this.childVc,id:this.id,idUid:this.idUid,loaded:this.loaded,mainVc:this.mainVc,mode:this.mode,moduleId:this.moduleId,subModuleId:this.subModuleId,taskId:this.taskId,taskVersion:this.taskVersion}};if(e.utils.isRunOnLiferay()){ak(b6,JSON.stringify(b4)).then(function(){if(b.isDefined(b7)){window.top.location.href=b7}else{if(b.isDefined(b5)){T.url("/"+b6+"?"+f.param(b5))}else{T.url("/"+b6)}}})}else{if(b.isDefined(b5)){T.url("/"+b6+"?"+f.param(b5))}else{T.url("/"+b6)}}}function aH(b4){this.closeDialog();b4({dialogCloseResult:J.constants.dialogCloseResult.Cancel,dialogCloseType:J.constants.dialogCloseType.NonInteractive})}function bF(b4){if(this.viewState[b4]&&this.viewState[b4].pendingFocus){var b5=this.viewState[b4].pendingFocus;ai(b5);delete this.viewState[b4].pendingFocus}}function V(b7,b6,b8){var b9=b7.select(),b5=b7.dataItem(b9[0]),ca=b7.element[0].id;if(b9.length==0||b9[0].className.indexOf("k-grid-edit-row")<0){var b4={nameEntityGrid:b6,rowData:b5,rowIndex:b7.dataSource.indexOf(b5)};b8.vc.gridRowSelecting(ca,b4);_executeApply(b8,b7)}}function W(b5,b7){var b6=b7.columns,b4=false,b8=this;if(b6.length>0){b6.forEach(function(b9){if(b.isDefined(b8.viewState[b5])&&b.isDefined(b8.viewState[b5].column[b9.field])){b4=b8.viewState[b5].column[b9.field].hidden;if(b9.hidden!=b4){if(b4){b7.hideColumn(b9.field)}else{b7.showColumn(b9.field)}}}})}}function ab(cc,b4,cb,b9,ca,b6,b7){var b8=this;var b5=null;console.log("_executeCommandCRUD");if(!cb&&b7&&this.parentVc){this.closeViewContainer(b7,true);return}var cd=bb(b5);if(cd){cd.then(function(ce){return au(b8,cc,b4,cb,b9,ca)}).then(function(cf){if(cf.success){var cg=b8.CRUDBuildTransactionRequest();if(!b6){if(cg.entityRequests.length>0){b8.serverCRUD.post(cg,function(ci){b8.CRUDProcessResponse(cc,b7,ci);var ch=new J.eventArgs.ExecuteCrudCallbackEventArgs();y(ch,cc,b8);ch.success=ci.success;aB.executeCrudCallback(b8.vcEvents,b8.model,ch);if(ci.success){b8.closeViewContainer(b7)}},J.utils.errorCallback)}else{G.showTranslateMessagesInfo("DSGNR.SYS_DSGNR_MSGTRNOKN_00018")}}else{var ce=new J.eventArgs.CallTransactionEventArgs();y(ce,cc,b8);aB.callCustomTransaction(b8.vcEvents,cg,ce);this.closeViewContainer(b7)}}})}}function m(ca){if(this.pk){var b9=this;var cd=[];var cc=[];for(var cb in this.metadata.entities){var b7=this.metadata.entities[cb];var b4={entityId:b7._entityId,version:b7._entityVersion};if(this.model[cb]){cd[cd.length]=b4}}var b6=J.utils.http.generatePrimaryKeyMap(this.pk);var b8={moduleId:this.metadata.taskPk.moduleId,subModuleId:this.metadata.taskPk.subModuleId,taskId:this.metadata.taskPk.taskId,version:this.metadata.taskPk.version};var b5=new a6.QueryEntitiesRequest(b8,cd,cc,b6);return this.serverCRUDQueryEntities.post(b5).$promise.then(function(ce){b9.CRUDProcessQueryEntityResponse(ce);return ca})}else{return ca}}function av(b7,b6){var b5=this;var b4;if(typeof b7==="string"){b4=this.request.qr[b7]}else{b4=b7;b7=b4.queryPk.queryId}b4.updateParameters();if(b5.serverEvents){b5.serverCRUDQueryId.post(b4).$promise.then(function(b8){var b9=b5.CRUDProcessQueryResponse(b8,b7);b6(b9)},J.utils.errorCallback)}}function bV(cb,ce,b8,b4,cc,cf,b7,b6){var ca=this,b5={value:false,dataToBeLoaded:[]};var cd=f("#"+cf);cb.updateParameters();if(b.isDefined(b4)){cb.parameters.cache=b4}if(b.isDefined(b7)&&b7!==null){aM(b5,cd,b6,b7)}if(ca.serverEvents){if(b.isDefined(b8)){ca.serverCRUDQueryId.post(cb).$promise.then(function(cg){ca.CRUDProcessQueryIdResponse(cg,ce,cb,cc);if(b5.dataToBeLoaded.length>0){cg.entityResponses=b5.dataToBeLoaded}b8(cg);o(ca,cf,cd)},J.utils.errorCallback)}else{var b9=ca.serverCRUDQueryId.post(cb,function(cg){ca.CRUDProcessQueryIdResponse(cg,ce,cb,cc)},J.utils.errorCallback);return b9.$promise}}}function ah(){var b5=new a6.TransactionRequest(this.metadata.taskPk);var b7;for(var b4 in this.model){if(!this.metadata.entities[b4]._transient){var b6=b5.addEntityRequests(this.metadata.entities[b4]._entityId,this.metadata.entities[b4]._entityVersion);if(!(this.model[b4] instanceof h.data.DataSource)){b7=a6.utils.addActionToEntityRequest(this.model[b4],this.metadata.entities[b4],this.mode,b6)}else{b7=a6.utils.addActionToEntityRequestGrid(b5,this.trackers[b4],this.metadata.entities[b4],b6)}if(b7==null){b5.removeEntityRequests(this.metadata.entities[b4]._entityId)}}}return b5}function a4(cg,cd,b7){if(b7.success){for(var cb in b7.entityResponses){var cf=b7.entityResponses[cb];var b6=J.utils.metadata.findEntityById(this.metadata,cf.entityId);if(b6){var ca=this.model[b6._entityName];if(ca){if(ca instanceof h.data.DataSource){var b5=[];for(var b9 in cf.pks){var b8=cf.pks[b9];var cc=J.utils.metadata.findAttNameByAttId(b6,b8.id);var b4=b8.oldValue;b5.push({field:cc,operator:"equals",value:b4})}ca.filter(b5);var ch=ca.view()[0];for(var b9 in cf.pks){var b8=cf.pks[b9];var cc=J.utils.metadata.findAttNameByAttId(b6,b8.id);var ce=b8.value;ch.set(cc,ce)}ca.filter([])}else{var b8=cf.pks[0];if(b.isDefined(b8)){var cc=J.utils.metadata.findAttNameByAttId(b6,b8.id);ca[cc]=b8.value}}}}}this.mode=J.constants.mode.Update;this.CRUDResetTrackers();L(cg,true,b7.messages,true,this);if(cd&&this.parentVc){this.closeViewContainer(cd)}}else{L(cg,false,b7.messages,true,this)}}function L(b9,ca,b8,b7,b4){var b6=false;if(b7){var b5=new J.eventArgs.ShowResultEventArgs();y(b5,b9,b4);b5.messages=b8;b5.success=ca;b6=aB.showCustomResult(b4.vcEvents,b5);if(!b6){if(ca){G.showTranslateMessagesInfo("DSGNR.SYS_DSGNR_MSGPROCOK_00033")}else{if(b8 instanceof Array&&b8.length>0){G.showAllMessages(b8)}else{if(b8 instanceof Array&&b8.length==0){G.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFAI_00034")}}}}}else{if(!ca){if(b8 instanceof Array&&b8.length>0){G.showAllMessages(b8)}else{if(b8 instanceof Array&&b8.length==0){G.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFAI_00034")}}}else{if(b8 instanceof Array&&b8.length>0){G.showAllMessages(b8)}}}}function a2(b5,b8){if(!b5.success){G.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFAI_00034")}else{if(b5.entityResponses&&b5.entityResponses.length>0){var b7=J.utils.metadata.findEntityNameByAttId(this.metadata,Object.keys(b5.entityResponses[0])[0]),b4=this.metadata.entities[b7];if(this.model[b7] instanceof h.data.DataSource){var b6=bR(b4,b5,true);b6=af(b6);this.CRUDResetTracker(b7);return b6}}}}function bX(b7){if(!b7.success){G.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFAI_00034")}else{if(b7.entityResponses){for(var b9=0;b9<b7.entityResponses.length;b9++){var cb=b7.entityResponses[b9];if(cb instanceof Array&&!f.isEmptyObject(cb)){var b4=J.utils.metadata.findEntityNameByAttId(this.metadata,Object.keys(cb[0])[0]),b5=this.metadata.entities[b4];if(this.model[b4] instanceof h.data.DataSource){var cc=[],b6={};for(var b8=0;b8<cb.length;b8++){for(var ca in b5){if(b.isDefined(cb[b8][b5[ca]])){b6[ca]=cb[b8][b5[ca]]}}cc.push(b6)}this.model[b4].data(af(cc));this.model[b4].sync()}else{if(cb.length>0){for(var ca in b5){if(cb[0][b5[ca]]){this.model[b4][ca]=cb[0][b5[ca]]}}}}}else{var b4=J.utils.metadata.findEntityNameByAttId(this.metadata,Object.keys(cb)[0]),b5=this.metadata.entities[b4];for(var ca in b5){if(cb[b5[ca]]){this.model[b4][ca]=cb[b5[ca]]}}}}}}}function bi(b7,ce,b6,cb){if(!b7.success){G.showTranslateMessagesError("DSGNR.SYS_DSGNR_MSGERRFAI_00034")}else{if(b7.entityResponses&&b7.entityResponses.length>0){var b4=J.utils.metadata.findEntityNameByAttId(this.metadata,Object.keys(b7.entityResponses[0])[0]),b5=this.metadata.entities[b4];if(ce){if(this.model[b4] instanceof h.data.DataSource){var b9=bR(b5,b7,true);this.model[b4].data(af(b9));this.model[b4].sync();this.CRUDResetTracker(b4)}else{var cd=b7.entityResponses[0];if(cd){for(var ca in b5){if(cd[b5[ca]]){this.model[b4][ca]=cd[b5[ca]]}}}}}}else{var b8=b6.mainEntityPk.entityId;var cc=J.utils.metadata.findEntityNameById(this.metadata,b8);if(cc!==null&&(this.model[cc] instanceof h.data.DataSource)&&(!b.isDefined(cb)||!cb)){this.model[cc].data([]);this.model[cc].sync();this.CRUDResetTracker(cc)}}}}function bR(b4,b5,b9){var b6=[];for(var b8=0;b8<b5.entityResponses.length;b8++){var b7=l(b4,b5.entityResponses[b8],b9);b6.push(b7)}return b6}function l(b4,b5,b8){var b7={};for(var b6 in b4){if(typeof b5[b4[b6]]!="undefined"){if(b8&&b6=="id"){b7.id_=b5[b4[b6]]}else{b7[b6]=b5[b4[b6]]}}}return b7}function k(b5,b6,b4){if(b6[b5]){b6[b5].clean()}}function bf(){a6.addTrackers(this.model);for(var b4 in this.trackers){this.trackers[b4].clean()}}function aJ(b4){var b5=this.trackers[b4];if(b5){b5.clean()}}function bQ(b6){for(var b4=0;b4<this.changeEvents.length;b4++){var b5=this.changeEvents[b4];b6.vc.viewState[b5.controlId].changeFlag=true}}function K(b7){this.addChangeEventFlags(b7);var b8=this;for(var b5=0;b5<this.changeEvents.length;b5++){var b6=this.changeEvents[b5];if(this.changeEvents[b5].unbind!==undefined){this.changeEvents[b5].unbind()}var b4=function(b9){b9.unbind=b7.$watch(b9.model,function(cd,ca,ci){if((typeof cd==="undefined"&&typeof ca==="undefined")||(cd===null&&ca===null)||(typeof cd==="undefined"&&ca===null)||(cd===null&&typeof ca==="undefined")||(cd===""&&ca===null)||(cd===null&&ca==="")||(cd===ca)){return}if((cd instanceof Date)&&(ca instanceof Date)){var ce=b.copy(cd);var cg=b.copy(ca);ce.setMilliseconds(0);cg.setMilliseconds(0);if(ce.getTime()===cg.getTime()){return}}var cb=ci.validator;if(b.isUndefined(cb)){cb=f("#validator").data("kendoValidator")}var ch=false;if(b.isDefined(cb)&&cb!==null&&cb.validateInput(f("#"+b9.elementId))){ch=true}if(ch||b8.vcEvents.changeWithError[b9.controlId]||b8.vcEvents.changeWithError.allGroup){var cf=ci.vc.viewState[b9.controlId].changeFlag;var cc=true;if(b.isDefined(cf)&&cf===false){cc=false}if(cc){ci.vc.change2(b9.controlId,cd,ca,ch)}}})};b4(b6)}}function z(b7,b9){var b6=this;var b8=bn.defer();var b5=bn.defer();var b4=new J.eventArgs.onTabClosingEventArgs();y(b4,b7,b6);b4.deferred=b8;b4.viewContainerId=b7;b4.closingReason=b9;aB.onTabClosingCommand(b6.vcEvents,b6.model,b4).then(function(){if(b9!=="sessionTimeout"&&b6.serverEvents&&b4.commons.execServer){var ca={};ca.closingReason=b9;b6.execute(bO.TabClosing,b7,b6.model,function(cb){b5.resolve()},ca)}else{b5.resolve()}});return b5.promise}function bS(b5,b4){return aB.customInputRestriction(this.vcEvents,b5,b4)}function bt(b5){var b6=this,b4=new J.eventArgs.CustomValidateEventArgs();b4.currentValue=b5.currentValue;y(b4,b5.controlId,b6);if(b.isDefined(b5.rowData)){b4.rowData=b5.rowData}aB.customValidate(b6.vcEvents,b6.model,b4);b5.isValid=b4.isValid;b5.errorMessage=b4.errorMessage;b5.currentValue=b4.currentValue}function D(b7,b5,b4,b6){return bT.component.getCssClass(b7,b5,b4,b6)}function aK(b4){bT.container.validateOnEnter(b4)}function aD(b4,b5){return bT.container.activeContainer(b4,b5)}function aZ(b4){return bT.container.isDisabledContainer(b4)}function aD(b4,b5){return bT.container.activeContainer(b4,b5)}function aZ(b4){return bT.container.isDisabledContainer(b4)}function a5(b6){if(b.isDefined(b6)){for(var b4 in b6){var b5=b6[b4].value;if(b5&&b5.indexOf(b6[b4].code+" -")===-1){b6[b4].value=b6[b4].code+" - "+b6[b4].value}}}return b6}function bJ(b5,b7,b4){var cd=[],ce=[],ca=f("tbody tr:first").find("td:hidden"),cc=0,cb=this,b9={},b6={};for(var b8 in ca){if(ca[b8].attributes!=undefined){ce.push(ca[b8].attributes.getNamedItem("ng-class").nodeValue)}cc+=cc+1;if(cc===ca.length){break}}b5.sender.columns.forEach(function(cf){if(b.isDefined(cf.field)){b9[cf.field]=!cf.hidden}});cb.grids[b7].columns.forEach(function(ch,ci){var cf=false;ce.some(function(cj){if(cj===ch.attributes["ng-class"]){cf=true;return true}});if(!cf&&ch.field!==undefined&&cb.viewState[b7].column[ch.field]!==undefined){var cg=cb.viewState[b7].column[ch.field].componentId;if(cg!==undefined){cd[ci]=cg}else{cd[ci]=""}}if(b.isDefined(ch.field)){b6[ch.field]=ci}});if(g){c=jQuery.extend({},b9)}O(cb.vcEvents,b7,b9,b5).then(function(cg){if(cg){if(g){u(b9,b5);b5.preventDefault();g=false;b5.sender.saveAsExcel()}else{u(c,b5);g=true}}var ci=f("div#"+b7).find("th");if((ci[0].textContent).trim()===""){ci.splice(0,1)}var cj=b4.data(),ck=b5.workbook,co=[];if(b.isDefined(ck)){if(ck.sheets.length>0&&ck.sheets[0].rows.length>0&&ck.sheets[0].rows[0].type==="header"&&ck.sheets[0].rows[0].cells.length>0){var cp=ck.sheets[0].rows[0].cells,cn,cm;cp.forEach(function(cr,cs){if(b.isDefined(cr.value)&&cr.value!==null&&cr.value.trim()!==""){cm=cr.value;cm=cm.substring(cm.indexOf("column."),cm.indexOf(".title"));cm=cm.replace("column.","");co[cs]=cm;cn=bd("translate")(cb.viewState[b7].column[cm].title);ck.sheets[0].rows[0].cells[cs].value=cn}})}var cq=ck.sheets[0].rows,ch,cf,cl;cq.forEach(function(cr,cs){if(cs>0){b.forEach(cr.cells,function(ct,cu){ch=b6[co[cu]];if(ct.value instanceof Date&&cb.grids[b7].columns[ch].format){ct.value=h.toString(ct.value,cb.grids[b7].columns[ch].format)}if(cb.catalogs[cd[ch]]!==undefined){cf=ct.value;if(cb.catalogs[cd[ch]] instanceof h.data.DataSource){cl=cb.catalogs[cd[ch]].get(cf);if(cl!==undefined){ct.value=cl.value}}else{cl=cb.catalogs[cd[ch]][cj[cs-1].uid].get(cf);if(cl!==undefined){ct.value=cl.value}}}})}})}})}function bx(b4){var b5=b.element("#"+b4).data("kendoGrid");b5.saveAsExcel()}function bu(b4){var b5=b.element("#"+b4).data("kendoGrid");b5.saveAsPDF()}function u(b7,b6){var b4;for(var b5 in b7){b4=b7[b5];if(b4){b6.sender.showColumn(b5)}else{b6.sender.hideColumn(b5)}}}function q(b6,b4,b5){if(b6[b4]===null){b6[b4]=b5}}function A(b6,b5,b4){if(b.isDefined(b6)){var b7=this.viewState[b5].column[b4].format;return h.toString(b6,b7)}else{return""}}function aq(b5){var b6=b.element(f("#"+this.id)).scope(),b7=[],b4;b5.forEach(function(b8){b4=bd("translate")(b8);b7.push({label:b4,path:""})});b6.breadcrumbs.getManual=b7}function aP(b4){if(b4.length>0){for(var b5=0;b5<b4.length;b5++){if(/\_+/.test(b4[b5].value)){b4[b5].value=""}}}}function I(){var b4=f("input[data-role='extdatepicker']").filter("[required]");var b6=f("input[data-role='extdatetimepicker']").filter("[required]");var b5=f("input[data-role='exttimepicker']").filter("[required]");aP(b4);aP(b6);aP(b5)}function O(b7,b4,b9,b5){var b6=this;var b8=new J.eventArgs.ExportColumnsEventArgs();y(b8,b4,b6);b8.exportColumnsToExcel=b9;return aB.exportColumns(b7,b4,b8,b5)}function ak(b5,b6){var b4=t(bm+"/sessionManager/",{},{save:{method:"POST"}});return b4.save({key:b5},b6).$promise}function aY(b6){var b5=t(bm+"/sessionManager/:key",{key:"@id"});var b4=b5.get({key:b6});return b4.$promise}function bv(b4){if(b.isDefined(b4.vcParent)){a7.vcParent=b4.vcParent}}function bE(b6,b5){var b7,b8=this.grids[b6.commons.controlId].columns;switch(b5.templateName){case"six-fields-2-4":b7="<div class='six-fields-2-4'><div class='cb-flex cb-gutters cb-middle'><div class='cb-grow'><span title='"+at(b8,b5.columns[0])+"' class='field-1'>"+ba(b8,b5.columns[0])+"</span></div><div><span title='"+at(b8,b5.columns[1])+"' class='field-2'>"+ba(b8,b5.columns[1])+"</span></div></div><div class='row'><div class='col-md-3'><span title='"+at(b8,b5.columns[2])+"' class='field-3'>"+ba(b8,b5.columns[2])+"</span></div><div class='col-md-3'><span title='"+at(b8,b5.columns[3])+"' class='field-4'>"+ba(b8,b5.columns[3])+"</span></div><div class='col-md-3'><span title='"+at(b8,b5.columns[4])+"' class='field-5'>"+ba(b8,b5.columns[4])+"</span></div><div class='col-md-3'><span title='"+b5.columns[5]+"' class='field-6'>"+aW(b5.columns[5],b6)+"</span></div></div>";break;case"six-fields-3-3":b7="<div class='six-fields-3-3'><div class='cb-flex cb-gutters cb-middle'><div class='cb-grow'><span title='"+at(b8,b5.columns[0])+"' class='field-1'>"+ba(b8,b5.columns[0])+"</span></div><div><span title='"+at(b8,b5.columns[1])+"' class='field-2'>"+ba(b8,b5.columns[1])+"</span><span title='"+at(b8,b5.columns[2])+"' class='field-3'>"+ba(b8,b5.columns[2])+"</span></div></div><div class='row'><div class='col-md-3'><span title='"+at(b8,b5.columns[3])+"' class='field-4'>"+ba(b8,b5.columns[3])+"</span></div><div class='col-md-3'><span title='"+at(b8,b5.columns[4])+"' class='field-5'>"+ba(b8,b5.columns[4])+"</span></div><div class='col-md-3'><span title='"+b5.columns[5]+"' class='field-6'>"+aW(b5.columns[5],b6)+"</span></div></div>";break;case"summary-two-fields-vertical":b7="<div class='summary-two-fields-vertical'><div class='field-1'><span translate>#= "+b5.columns[0]+"#</span></div><div><span title='"+b5.columns[1]+"' class='field-2'>"+aW(b5.columns[1],b6)+"</span></div></div>";break;case"summary-two-fields-validation":var b4="<span ng-class='#= "+b5.columns[2]+'# ? "summary-template-title" : "summary-template-description"\' translate>#= '+b5.columns[0]+"#</span>";b7="<div class='summary-two-fields-validation'><div class='row'><div class='col-xs-6'><div class='field-1'>"+b4+"</div></div><div class='col-xs-6'><span class='field-2'>"+ba(b8,b5.columns[1])+"</span></div></div></div>";break;default:b7="";break}return b7}function ac(b4){var b5;switch(b4.templateName){case"two-fields":b5='<div class="two-fields"><div class="row"><div class="col-xs-6"><span class="field-1"> #='+b4.columns[0]+'#</span></div><div class="col-xs-6"><span class="field-2">#= '+b4.columns[1]+"#</span></div></div></div>";break;case"three-fields":b5='<div class="three-fields"><div class="cb-flex cb-gutters cb-middle"><div class="cb-grow field-1">#='+b4.columns[0]+'#</div><div><span class="field-2">#='+b4.columns[1]+'#</span></div></div><div><span class="field-3">#='+b4.columns[2]+"#</span></div></div>";break;case"three-fields-horizontal":b5='<div class="three-fields-horizontal"><div class="cb-flex cb-gutters cb-middle"><div class="cb-grow field-1">#='+b4.columns[0]+'#</div><div><span class="field-2">#='+b4.columns[1]+'#</span></div><div><span class="field-3">#='+b4.columns[2]+"#</span></div></div></div>";break;default:b5="";break}return b5}function ba(b5,b4){var b7="";var b6=b5.filter(function(b8){return b8.field===b4});if(b6.length>0&&typeof b6[0].template!=="undefined"){b7=b6[0].template}return b7}function at(b5,b4){var b7="";var b6=b5.filter(function(b8){return b8.field===b4});if(b6.length>0&&typeof b6[0].title!=="undefined"){b7=b6[0].title}return b7}function aW(b6,b4){var b5="";if(typeof b6!=="undefined"&&b6.length>0){b5=b4.parameters.templateBase}return b5}return{constants:J.constants,enums:J.enums,utils:J.utils,initViewContainer:function(cb,b5,b7,cd,cc){bm=cc;var cg;var b8=cb.viewContainerId;var b4=b8;if(b.isDefined(cd)&&b.isDefined(cd.uid)){b4=cd.uid}if(bq[b4]){bq[b4].loaded=true;return bq[b4]}var ck=cb.moduleId,cl=cb.subModuleId,b6=cb.taskId,ce=cb.taskVersion,ca=bL(b4),ci=true,b9=false,cj=false,cf=cb.serverEvents,ch=cb.hasCloseModalEvent===undefined?false:cb.hasCloseModalEvent;if(ca){ci=false;if((ca.moduleId===ck&&ca.subModuleId===cl&&ca.taskId===b6&&ca.taskVersion===ce)||(b.isDefined(ca.dialogParameters.isChild)&&ca.dialogParameters.isChild===true)){b9=true}if(b.isDefined(ca.dialogParameters.autoSync)&&ca.dialogParameters.autoSync===true){cj=true}}bq[b4]={accept:aV,addChangeEvents:K,addChangeEventFlags:bQ,addChildVc:aT,autoSyncNavigation:cj,removeChildVc:bz,afterCloseModal:S,afterCloseModalGrid:aR,afterOpenGridDialog:aF,afterCloseGridDialog:bH,onCloseModalEvent:bw,beforeOpenGridDialog:B,beforeCloseGridDialog:bM,cancel:i,change:aw,change2:bD,changeGroup:aG,changeInitData:bA,changeGridColumnWidth:aI,cleanData:aQ,clickTab:bk,clickTextInputButton:ag,clickTextInputButtonGrid:P,closeDialog:R,closeModal:ax,closeViewContainer:M,comboBoxChange:bj,designerEventsConstants:bO,dismissModal:aH,execute:bW,executeCatalog:b2,executeCommand:bC,executeEvent:a0,executeEventInGrid:b3,executeLabelCommand:am,executeGridRowCommand:az,executeGridCommand:bg,executeQuery:a9,executeQueryAndAppendResults:bK,executeQueryControl:bB,executeService:Q,focus:aO,gridAfterLeaveInLineRow:ar,gridBeforeEnterInLineRow:aX,gridDataBound:bF,gridRowAction:F,gridRowChange:V,gridRowSelecting:aj,gridRowRendering:br,hideShowColumns:W,showGridRowDetailIcon:aN,gridInitDetailTemplate:s,gridInitColumnTemplate:H,gridInitEditColumnTemplate:bI,getPlaceHolder:Y,createViewState:bN,setGridComboBoxDefaultValue:a1,setReadOnlyInputCombobox:aS,setComboBoxDefaultValue:bl,getParentValue:by,validateForm:aU,setWidthColumn:C,initData:p,isColumnOfButton:bU,isModal:r,isDetailGrid:j,loadCatalog:ad,loadCatalogCobis:be,loadDependentCatalog:b0,loadDependentCatalogOnInit:E,nextSeq:bh,processExecuteQueryResponse:ao,processResponse:bZ,getDesignerData:aE,processTemporaryResponse:Z,render:N,url:aA,childVc:b9,crud:a6,id:b8,idUid:b4,mainVc:ci,moduleId:ck,parentVc:ca,serverEvents:cf,subModuleId:cl,taskId:b6,taskVersion:ce,urlRestService:b5,urlLiferayRest:cc,vcEvents:b7,server:J.utils.createResource(b5,true),serverCRUD:J.utils.createResource(b5+"/crud",true),serverCRUDQueryEntities:J.utils.createResource(b5+"/crudQueryEntities",true),serverCRUDQueryId:J.utils.createResource(b5+"/crudQueryId",true),args:{},catalogs:{},currentValues:{},customDialogParameters:{},dialogParameters:{},serverParameters:{},lifeCycle:bp,grids:{},uploaders:{},metadata:{},modalInstances:{},model:{},request:{},queries:{},seq:{},submitted:{},tmpModel:{},trackers:{},types:{},viewState:{},CRUDBuildTransactionRequest:ah,CRUDExecute:ab,CRUDExecuteQueryEntities:m,CRUDExecuteQueryId:bV,CRUDExecuteQuery:av,CRUDProcessResponse:a4,CRUDProcessQueryEntityResponse:bX,CRUDProcessQueryIdResponse:bi,CRUDProcessQueryResponse:a2,CRUDResetTrackers:bf,CRUDResetTracker:aJ,changeEvents:[],loaded:false,clickFileUploader:bo,removeFile:ap,onFileUpload:bP,getCssClass:D,validateOnEnter:aK,activeContainer:aD,isDisabledContainer:aZ,onFileSelect:al,onSuccess:an,setVisibilityOfGridRowDetailIcon:a8,clickOnEnter:bs,rowData:cd,onTabClosing:z,customInputRestriction:bS,customValidate:bt,convertCatalog:a5,handlerCloseModal:bY,hasOnCloseModalEvent:ch,exportGrid:bJ,exportGridToExcel:bx,exportGridToPdf:bu,sessionElement:cg,setFalseValueForCheckBoxIfNull:q,getStringColumnFormat:A,exportColumns:O,setBreadcrumbs:aq,getGridTemplate:bE,getComboBoxTemplate:ac};if(e.utils.isRunOnLiferay()){if(r(cb.scope)||j(cb.scope)||cb.isDesignerInclude){bq[b4].isModalPage=true;bq[b4].sessionElement={}}else{bq[b4].isModalPage=false;aY(b4).then(function(cp){bq[b4].sessionElement=cp;var co=cp.vcParent;var cm=true;var cn=false;if(co){cm=false;if(co.moduleId===ck&&co.subModuleId===cl&&co.taskId===b6&&co.taskVersion===ce){cn=true}}bq[b4].childVc=cn;bq[b4].mainVc=cm;bq[b4].parentVc=co;bv(cp,bq,b4)})}}return bq[b4]},initCustomViewContainer:function(cb,b9,b8){var ca=cb;if(b.isDefined(b8)&&b.isDefined(b8.uid)){ca=b8.uid}if(bq[ca]){bq[ca].loaded=true;return bq[ca]}var b7=bL(ca);var b4=true;var b5=false;var b6=false;if(b7){b4=false}if(b.isUndefined(b9)){b9={}}bq[ca]={id:cb,model:{},dialogParameters:{},customDialogParameters:{},vcEvents:{},mainVc:b4,childVc:b5,autoSyncNavigation:b6,parentVc:b7,addChildVc:aT,removeChildVc:bz,isModal:r,isDetailGrid:j,closeDialog:R,closeModal:ax,closeViewContainer:M,modalInstances:{},vcEvents:b9,afterCloseModal:S,url:aA,rowData:b8,loaded:false,args:{},handlerCloseModal:bY};return bq[ca]},viewContainer:function(b4){return bq[b4]}}}])}));